$.smVersion="0.6.2",+function(t){"use strict";var n={autoInit:!1,showPageLoadingIndicator:!0,router:!0,swipePanel:"left",swipePanelOnlyClose:!0};t.config={router:!1},t.smConfig=t.extend(n,t.config)}(Zepto),+function(t){"use strict";t.compareVersion=function(t,n){var c=t.split("."),i=n.split(".");if(t===n)return 0;for(var e=0;e<c.length;e++){var a=parseInt(c[e]);if(!i[e])return 1;var r=parseInt(i[e]);if(r>a)return-1;if(a>r)return 1}return-1},t.getCurrentPage=function(){return t(".page-current")[0]||t(".page")[0]||document.body}}(Zepto),function(t){"use strict";function n(t,n){function c(t){if(t.target===this)for(n.call(this,t),i=0;i<e.length;i++)a.off(e[i],c)}var i,e=t,a=this;if(n)for(i=0;i<e.length;i++)a.on(e[i],c)}["width","height"].forEach(function(n){var c=n.replace(/./,function(t){return t[0].toUpperCase()});t.fn["outer"+c]=function(t){var c=this;if(c){var i=c[n](),e={width:["left","right"],height:["top","bottom"]};return e[n].forEach(function(n){t&&(i+=parseInt(c.css("margin-"+n),10))}),i}return null}}),t.support=function(){var t={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)};return t}(),t.touchEvents={start:t.support.touch?"touchstart":"mousedown",move:t.support.touch?"touchmove":"mousemove",end:t.support.touch?"touchend":"mouseup"},t.getTranslate=function(t,n){var c,i,e,a;return"undefined"==typeof n&&(n="x"),e=window.getComputedStyle(t,null),window.WebKitCSSMatrix?a=new WebKitCSSMatrix("none"===e.webkitTransform?"":e.webkitTransform):(a=e.MozTransform||e.transform||e.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),c=a.toString().split(",")),"x"===n&&(i=window.WebKitCSSMatrix?a.m41:parseFloat(16===c.length?c[12]:c[4])),"y"===n&&(i=window.WebKitCSSMatrix?a.m42:parseFloat(16===c.length?c[13]:c[5])),i||0},t.requestAnimationFrame=function(t){return requestAnimationFrame?requestAnimationFrame(t):webkitRequestAnimationFrame?webkitRequestAnimationFrame(t):mozRequestAnimationFrame?mozRequestAnimationFrame(t):setTimeout(t,1e3/60)},t.cancelAnimationFrame=function(t){return cancelAnimationFrame?cancelAnimationFrame(t):webkitCancelAnimationFrame?webkitCancelAnimationFrame(t):mozCancelAnimationFrame?mozCancelAnimationFrame(t):clearTimeout(t)},t.fn.dataset=function(){var n={},c=this[0].dataset;for(var i in c){var e=n[i]=c[i];"false"===e?n[i]=!1:"true"===e?n[i]=!0:parseFloat(e)===1*e&&(n[i]=1*e)}return t.extend({},n,this[0].__eleData)},t.fn.data=function(n,c){var i=t(this).dataset();if(!n)return i;if("undefined"==typeof c){var e=i[n],a=this[0].__eleData;return a&&n in a?a[n]:e}for(var r=0;r<this.length;r++){var l=this[r];n in i&&delete l.dataset[n],l.__eleData||(l.__eleData={}),l.__eleData[n]=c}return this},t.fn.animationEnd=function(t){return n.call(this,["webkitAnimationEnd","animationend"],t),this},t.fn.transitionEnd=function(t){return n.call(this,["webkitTransitionEnd","transitionend"],t),this},t.fn.transition=function(t){"string"!=typeof t&&(t+="ms");for(var n=0;n<this.length;n++){var c=this[n].style;c.webkitTransitionDuration=c.MozTransitionDuration=c.transitionDuration=t}return this},t.fn.transform=function(t){for(var n=0;n<this.length;n++){var c=this[n].style;c.webkitTransform=c.MozTransform=c.transform=t}return this},t.fn.prevAll=function(n){var c=[],i=this[0];if(!i)return t([]);for(;i.previousElementSibling;){var e=i.previousElementSibling;n?t(e).is(n)&&c.push(e):c.push(e),i=e}return t(c)},t.fn.nextAll=function(n){var c=[],i=this[0];if(!i)return t([]);for(;i.nextElementSibling;){var e=i.nextElementSibling;n?t(e).is(n)&&c.push(e):c.push(e),i=e}return t(c)},t.fn.show=function(){function t(t){var c,i;return n[t]||(c=document.createElement(t),document.body.appendChild(c),i=getComputedStyle(c,"").getPropertyValue("display"),c.parentNode.removeChild(c),"none"===i&&(i="block"),n[t]=i),n[t]}var n={};return this.each(function(){"none"===this.style.display&&(this.style.display=""),"none"===getComputedStyle(this,"").getPropertyValue("display"),this.style.display=t(this.nodeName)})}}(Zepto),function(t){"use strict";var n={},c=navigator.userAgent,i=c.match(/(Android);?[\s\/]+([\d.]+)?/),e=c.match(/(iPad).*OS\s([\d_]+)/),a=c.match(/(iPod)(.*OS\s([\d_]+))?/),r=!e&&c.match(/(iPhone\sOS)\s([\d_]+)/);if(n.ios=n.android=n.iphone=n.ipad=n.androidChrome=!1,i&&(n.os="android",n.osVersion=i[2],n.android=!0,n.androidChrome=c.toLowerCase().indexOf("chrome")>=0),(e||r||a)&&(n.os="ios",n.ios=!0),r&&!a&&(n.osVersion=r[2].replace(/_/g,"."),n.iphone=!0),e&&(n.osVersion=e[2].replace(/_/g,"."),n.ipad=!0),a&&(n.osVersion=a[3]?a[3].replace(/_/g,"."):null,n.iphone=!0),n.ios&&n.osVersion&&c.indexOf("Version/")>=0&&"10"===n.osVersion.split(".")[0]&&(n.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]),n.webView=(r||e||a)&&c.match(/.*AppleWebKit(?!.*Safari)/i),n.os&&"ios"===n.os){var l=n.osVersion.split(".");n.minimalUi=!n.webView&&(a||r)&&(1*l[0]===7?1*l[1]>=1:1*l[0]>7)&&t('meta[name="viewport"]').length>0&&t('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var h=t(window).width(),d=t(window).height();n.statusBar=!1,n.statusBar=n.webView&&h*d===screen.width*screen.height?!0:!1;var u=[];if(n.pixelRatio=window.devicePixelRatio||1,u.push("pixel-ratio-"+Math.floor(n.pixelRatio)),n.pixelRatio>=2&&u.push("retina"),n.os&&(u.push(n.os,n.os+"-"+n.osVersion.split(".")[0],n.os+"-"+n.osVersion.replace(/\./g,"-")),"ios"===n.os))for(var f=parseInt(n.osVersion.split(".")[0],10),m=f-1;m>=6;m--)u.push("ios-gt-"+m);n.statusBar?u.push("with-statusbar-overlay"):t("html").removeClass("with-statusbar-overlay"),u.length>0&&t("html").addClass(u.join(" ")),n.isWeixin=/MicroMessenger/i.test(c),t.device=n}(Zepto),function(){"use strict";function t(n,i){function e(t,n){return function(){return t.apply(n,arguments)}}var a;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=n,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!t.notNeeded(n)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],l=this,h=0,d=r.length;d>h;h++)l[r[h]]=e(l[r[h]],l);c&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(t,c,i){var e=Node.prototype.removeEventListener;"click"===t?e.call(n,t,c.hijacked||c,i):e.call(n,t,c,i)},n.addEventListener=function(t,c,i){var e=Node.prototype.addEventListener;"click"===t?e.call(n,t,c.hijacked||(c.hijacked=function(t){t.propagationStopped||c(t)}),i):e.call(n,t,c,i)}),"function"==typeof n.onclick&&(a=n.onclick,n.addEventListener("click",function(t){a(t)},!1),n.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!n,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,e=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=i&&/OS [6-7]_\d/.test(navigator.userAgent),r=navigator.userAgent.indexOf("BB10")>0,l=!1;t.prototype.needsClick=function(t){for(var n=t;n&&"BODY"!==n.tagName.toUpperCase();){if("LABEL"===n.tagName.toUpperCase()&&(l=!0,/\bneedsclick\b/.test(n.className)))return!0;n=n.parentNode}switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(i&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,n){var c,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=n.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,t.dispatchEvent(c)},t.prototype.determineEventType=function(t){return c&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var n,c=["date","time","month","number","email"];i&&t.setSelectionRange&&-1===c.indexOf(t.type)?(n=t.value.length,t.setSelectionRange(n,n)):t.focus()},t.prototype.updateScrollParent=function(t){var n,c;if(n=t.fastClickScrollParent,!n||!n.contains(t)){c=t;do{if(c.scrollHeight>c.offsetHeight){n=c,t.fastClickScrollParent=c;break}c=c.parentElement}while(c)}n&&(n.fastClickLastScrollTop=n.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var n,c,a;if(t.targetTouches.length>1)return!0;if(n=this.getTargetElementFromEventTarget(t.target),c=t.targetTouches[0],i){if(a=window.getSelection(),a.rangeCount&&!a.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(n)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=n,this.touchStartX=c.pageX,this.touchStartY=c.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var n=t.changedTouches[0],c=this.touchBoundary;return Math.abs(n.pageX-this.touchStartX)>c||Math.abs(n.pageY-this.touchStartY)>c?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var n,r,l,h,d,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;var f=["date","time","month"];if(-1!==f.indexOf(t.target.type))return!1;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,r=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(d=t.changedTouches[0],u=document.elementFromPoint(d.pageX-window.pageXOffset,d.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),l=u.tagName.toLowerCase(),"label"===l){if(n=this.findControl(u)){if(this.focus(u),c)return!1;u=n}}else if(this.needsFocus(u))return t.timeStamp-r>100||i&&window.top!==window&&"input"===l?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),i&&"select"===l||(this.targetElement=null,t.preventDefault()),!1);return i&&!e&&(h=u.fastClickScrollParent,h&&h.fastClickLastScrollTop!==h.scrollTop)?!0:(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:!t.cancelable||this.needsClick(this.targetElement)&&!this.cancelNextClick?!0:(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),l||t.preventDefault(),!1):!0},t.prototype.onClick=function(t){var n;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(n=this.onMouse(t),n||(this.targetElement=null),n)},t.prototype.destroy=function(){var t=this.layer;c&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var n,i,e,a;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(n=document.querySelector("meta[name=viewport]")){if(-1!==n.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(r&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(n=document.querySelector("meta[name=viewport]")))){if(-1!==n.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(a=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],a>=27&&(n=document.querySelector("meta[name=viewport]"),n&&(-1!==n.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(n,c){return new t(n,c)},window.FastClick=t}(),+function(t){"use strict";function n(){var c,e=t(this),n=(e.attr("href"),e.dataset());e.hasClass("open-popup")&&(c=n.popup?n.popup:".popup",t.popup(c)),e.hasClass("close-popup")&&(c=n.popup?n.popup:".popup.modal-in",t.closeModal(c)),e.hasClass("modal-overlay")&&(t(".modal.modal-in").length>0&&i.modalCloseByOutside&&t.closeModal(".modal.modal-in"),t(".actions-modal.modal-in").length>0&&i.actionsCloseByOutside&&t.closeModal(".actions-modal.modal-in")),e.hasClass("popup-overlay")&&t(".popup.modal-in").length>0&&i.popupCloseByOutside&&t.closeModal(".popup.modal-in")}var c=document.createElement("div");t.modalStack=[],t.modalStackClearQueue=function(){t.modalStack.length&&t.modalStack.shift()()},t.modal=function(n){n=n||{};var e="",a="";if(n.buttons&&n.buttons.length>0)for(var r=0;r<n.buttons.length;r++)a+='<span class="modal-button'+(n.buttons[r].bold?" modal-button-bold":"")+'">'+n.buttons[r].text+"</span>";var l=n.extraClass||"",h=n.title?'<div class="modal-title">'+n.title+"</div>":"",d=n.text?'<div class="modal-text">'+n.text+"</div>":"",u=n.afterText?n.afterText:"",f=n.buttons&&0!==n.buttons.length?"":"modal-no-buttons",m=n.verticalButtons?"modal-buttons-vertical":"";e='<div class="modal '+l+" "+f+'"><div class="modal-inner">'+(h+d+u)+'</div><div class="modal-buttons '+m+'">'+a+"</div></div>",c.innerHTML=e;var v=t(c).children();return t(i.modalContainer).append(v[0]),v.find(".modal-button").each(function(c,i){t(i).on("click",function(i){n.buttons[c].close!==!1&&t.closeModal(v),n.buttons[c].onClick&&n.buttons[c].onClick(v,i),n.onClick&&n.onClick(v,c)})}),t.openModal(v),v[0]},t.alert=function(n,c,e){return"function"==typeof c&&(e=arguments[1],c=void 0),t.modal({text:n||"",title:"undefined"==typeof c?i.modalTitle:c,buttons:[{text:i.modalButtonOk,bold:!0,onClick:e}]})},t.confirm=function(n,c,e,a){return"function"==typeof c&&(a=arguments[2],e=arguments[1],c=void 0),t.modal({text:n||"",title:"undefined"==typeof c?i.modalTitle:c,buttons:[{text:i.modalButtonCancel,onClick:a},{text:i.modalButtonOk,bold:!0,onClick:e}]})},t.prompt=function(n,c,e,a){return"function"==typeof c&&(a=arguments[2],e=arguments[1],c=void 0),t.modal({text:n||"",title:"undefined"==typeof c?i.modalTitle:c,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:i.modalButtonCancel},{text:i.modalButtonOk,bold:!0}],onClick:function(n,c){0===c&&a&&a(t(n).find(".modal-text-input").val()),1===c&&e&&e(t(n).find(".modal-text-input").val())}})},t.modalLogin=function(n,c,e,a){return"function"==typeof c&&(a=arguments[2],e=arguments[1],c=void 0),t.modal({text:n||"",title:"undefined"==typeof c?i.modalTitle:c,afterText:'<input type="text" name="modal-username" placeholder="'+i.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+i.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:i.modalButtonCancel},{text:i.modalButtonOk,bold:!0}],onClick:function(n,c){var i=t(n).find('.modal-text-input[name="modal-username"]').val(),r=t(n).find('.modal-text-input[name="modal-password"]').val();0===c&&a&&a(i,r),1===c&&e&&e(i,r)}})},t.modalPassword=function(n,c,e,a){return"function"==typeof c&&(a=arguments[2],e=arguments[1],c=void 0),t.modal({text:n||"",title:"undefined"==typeof c?i.modalTitle:c,afterText:'<input type="password" name="modal-password" placeholder="'+i.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:i.modalButtonCancel},{text:i.modalButtonOk,bold:!0}],onClick:function(n,c){var i=t(n).find('.modal-text-input[name="modal-password"]').val();0===c&&a&&a(i),1===c&&e&&e(i)}})},t.showPreloader=function(n){return t.hidePreloader(),t.showPreloader.preloaderModal=t.modal({title:n||i.modalPreloaderTitle,text:'<div class="preloader"></div>'}),t.showPreloader.preloaderModal},t.hidePreloader=function(){t.showPreloader.preloaderModal&&t.closeModal(t.showPreloader.preloaderModal)},t.showIndicator=function(){t(".preloader-indicator-modal")[0]||t(i.modalContainer).append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')},t.hideIndicator=function(){t(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},t.actions=function(n){var e,a,r;n=n||[],n.length>0&&!t.isArray(n[0])&&(n=[n]);for(var l,h="",d=0;d<n.length;d++)for(var u=0;u<n[d].length;u++){0===u&&(h+='<div class="actions-modal-group">');var f=n[d][u],m=f.label?"actions-modal-label":"actions-modal-button";f.bold&&(m+=" actions-modal-button-bold"),f.color&&(m+=" color-"+f.color),f.bg&&(m+=" bg-"+f.bg),f.disabled&&(m+=" disabled"),h+='<span class="'+m+'">'+f.text+"</span>",u===n[d].length-1&&(h+="</div>")}l='<div class="actions-modal">'+h+"</div>",c.innerHTML=l,e=t(c).children(),t(i.modalContainer).append(e[0]),a=".actions-modal-group",r=".actions-modal-button";var v=e.find(a);return v.each(function(c,i){var a=c;t(i).children().each(function(c,i){var l,h=c,d=n[a][h];t(i).is(r)&&(l=t(i)),l&&l.on("click",function(n){d.close!==!1&&t.closeModal(e),d.onClick&&d.onClick(e,n)})})}),t.openModal(e),e[0]},t.popup=function(n,c){if("undefined"==typeof c&&(c=!0),"string"==typeof n&&n.indexOf("<")>=0){var e=document.createElement("div");if(e.innerHTML=n.trim(),!(e.childNodes.length>0))return!1;n=e.childNodes[0],c&&n.classList.add("remove-on-close"),t(i.modalContainer).append(n)}return n=t(n),0===n.length?!1:(n.show(),n.find(".content").scroller("refresh"),n.find("."+i.viewClass).length>0&&t.sizeNavbars(n.find("."+i.viewClass)[0]),t.openModal(n),n[0])},t.pickerModal=function(n,c){if("undefined"==typeof c&&(c=!0),"string"==typeof n&&n.indexOf("<")>=0){if(n=t(n),!(n.length>0))return!1;c&&n.addClass("remove-on-close"),t(i.modalContainer).append(n[0])}return n=t(n),0===n.length?!1:(n.show(),t.openModal(n),n[0])},t.loginScreen=function(n){return n||(n=".login-screen"),n=t(n),0===n.length?!1:(n.show(),n.find("."+i.viewClass).length>0&&t.sizeNavbars(n.find("."+i.viewClass)[0]),t.openModal(n),n[0])},t.toast=function(n,c,i){var e=t('<div class="modal toast '+(i||"")+'">'+n+"</div>").appendTo(document.body);t.openModal(e,function(){setTimeout(function(){t.closeModal(e)},c||2e3)})},t.openModal=function(n,c){n=t(n);var e=n.hasClass("modal"),a=!n.hasClass("toast");if(t(".modal.modal-in:not(.modal-out)").length&&i.modalStack&&e&&a)return void t.modalStack.push(function(){t.openModal(n,c)});var r=n.hasClass("popup"),l=n.hasClass("login-screen"),h=n.hasClass("picker-modal"),d=n.hasClass("toast");e&&(n.show(),n.css({marginTop:-Math.round(n.outerHeight()/2)+"px"})),d&&n.css({marginLeft:-Math.round(n.outerWidth()/2/1.185)+"px"});var u;return l||h||d||(0!==t(".modal-overlay").length||r||t(i.modalContainer).append('<div class="modal-overlay"></div>'),0===t(".popup-overlay").length&&r&&t(i.modalContainer).append('<div class="popup-overlay"></div>'),u=t(r?".popup-overlay":".modal-overlay")),n[0].clientLeft,n.trigger("open"),h&&t(i.modalContainer).addClass("with-picker-modal"),l||h||d||u.addClass("modal-overlay-visible"),n.removeClass("modal-out").addClass("modal-in").transitionEnd(function(){n.trigger(n.hasClass("modal-out")?"closed":"opened")}),"function"==typeof c&&c.call(this),!0},t.closeModal=function(n){if(n=t(n||".modal-in"),"undefined"==typeof n||0!==n.length){var c=n.hasClass("modal"),e=n.hasClass("popup"),a=n.hasClass("toast"),r=n.hasClass("login-screen"),l=n.hasClass("picker-modal"),h=n.hasClass("remove-on-close"),d=t(e?".popup-overlay":".modal-overlay");return e?n.length===t(".popup.modal-in").length&&d.removeClass("modal-overlay-visible"):l||a||d.removeClass("modal-overlay-visible"),n.trigger("close"),l&&(t(i.modalContainer).removeClass("with-picker-modal"),t(i.modalContainer).addClass("picker-modal-closing")),n.removeClass("modal-in").addClass("modal-out").transitionEnd(function(){n.trigger(n.hasClass("modal-out")?"closed":"opened"),l&&t(i.modalContainer).removeClass("picker-modal-closing"),e||r||l?(n.removeClass("modal-out").hide(),h&&n.length>0&&n.remove()):n.remove()}),c&&i.modalStack&&t.modalStackClearQueue(),!0}},t(document).on("click"," .modal-overlay, .popup-overlay, .close-popup, .open-popup, .close-picker",n);var i=t.modal.prototype.defaults={modalStack:!0,modalButtonOk:"确定",modalButtonCancel:"取消",modalPreloaderTitle:"加载中",modalContainer:document.body}}(Zepto),+function(t){"use strict";var n=!1,c=function(c){function i(t){t=new Date(t);var n=t.getFullYear(),c=t.getMonth(),i=c+1,e=t.getDate(),a=t.getDay();return l.params.dateFormat.replace(/yyyy/g,n).replace(/yy/g,(n+"").substring(2)).replace(/mm/g,10>i?"0"+i:i).replace(/m/g,i).replace(/MM/g,l.params.monthNames[c]).replace(/M/g,l.params.monthNamesShort[c]).replace(/dd/g,10>e?"0"+e:e).replace(/d/g,e).replace(/DD/g,l.params.dayNames[a]).replace(/D/g,l.params.dayNamesShort[a])}function e(n){if(n.preventDefault(),t.device.isWeixin&&t.device.android&&l.params.inputReadOnly&&(this.focus(),this.blur()),!l.opened&&(l.open(),l.params.scrollToInput)){var c=l.input.parents(".content");if(0===c.length)return;var i,e=parseInt(c.css("padding-top"),10),a=parseInt(c.css("padding-bottom"),10),r=c[0].offsetHeight-e-l.container.height(),h=c[0].scrollHeight-e-l.container.height(),d=l.input.offset().top-e+l.input[0].offsetHeight;if(d>r){var u=c.scrollTop()+d-r;u+r>h&&(i=u+r-h+a,r===h&&(i=l.container.height()),c.css({"padding-bottom":i+"px"})),c.scrollTop(u,300)}}}function a(n){l.input&&l.input.length>0?n.target!==l.input[0]&&0===t(n.target).parents(".picker-modal").length&&l.close():0===t(n.target).parents(".picker-modal").length&&l.close()}function r(){l.opened=!1,l.input&&l.input.length>0&&l.input.parents(".content").css({"padding-bottom":""}),l.params.onClose&&l.params.onClose(l),l.destroyCalendarEvents()}var l=this,h={monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["周日","周一","周二","周三","周四","周五","周六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],firstDay:1,weekendDays:[0,6],multiple:!1,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:!0,animate:!0,closeOnSelect:!0,monthPicker:!0,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><div class="current-month-value"></div><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:!0,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:!0,scrollToInput:!0,inputReadOnly:!0,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>'};c=c||{};for(var d in h)"undefined"==typeof c[d]&&(c[d]=h[d]);l.params=c,l.initialized=!1,l.inline=l.params.container?!0:!1,l.isH="horizontal"===l.params.direction;var u=l.isH&&n?-1:1;return l.animating=!1,l.addValue=function(t){if(l.params.multiple){l.value||(l.value=[]);for(var n,c=0;c<l.value.length;c++)new Date(t).getTime()===new Date(l.value[c]).getTime()&&(n=c);"undefined"==typeof n?l.value.push(t):l.value.splice(n,1),l.updateValue()}else l.value=[t],l.updateValue()},l.setValue=function(t){l.value=t,l.updateValue()},l.updateValue=function(){l.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var n,c;for(n=0;n<l.value.length;n++){var e=new Date(l.value[n]);l.wrapper.find('.picker-calendar-day[data-date="'+e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()+'"]').addClass("picker-calendar-day-selected")}if(l.params.onChange&&l.params.onChange(l,l.value,l.value.map(i)),l.input&&l.input.length>0){if(l.params.formatValue)c=l.params.formatValue(l,l.value);else{for(c=[],n=0;n<l.value.length;n++)c.push(i(l.value[n]));c=c.join(", ")}t(l.input).val(c),t(l.input).trigger("change")}},l.initCalendarEvents=function(){function c(t){h||r||(r=!0,d=v="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,f=v="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,o=(new Date).getTime(),x=0,b=!0,C=void 0,g=y=l.monthsTranslate)}function i(t){if(r){if(m="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,v="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,"undefined"==typeof C&&(C=!!(C||Math.abs(v-f)>Math.abs(m-d))),l.isH&&C)return void(r=!1);if(t.preventDefault(),l.animating)return void(r=!1);b=!1,h||(h=!0,s=l.wrapper[0].offsetWidth,w=l.wrapper[0].offsetHeight,l.wrapper.transition(0)),t.preventDefault(),T=l.isH?m-d:v-f,x=T/(l.isH?s:w),y=100*(l.monthsTranslate*u+x),l.wrapper.transform("translate3d("+(l.isH?y:0)+"%, "+(l.isH?0:y)+"%, 0)")}}function e(){return r&&h?(r=h=!1,p=(new Date).getTime(),300>p-o?Math.abs(T)<10?l.resetMonth():T>=10?n?l.nextMonth():l.prevMonth():n?l.prevMonth():l.nextMonth():-.5>=x?n?l.prevMonth():l.nextMonth():x>=.5?n?l.nextMonth():l.prevMonth():l.resetMonth(),void setTimeout(function(){b=!0},100)):void(r=h=!1)}function a(n){if(b){var c=t(n.target).parents(".picker-calendar-day");if(0===c.length&&t(n.target).hasClass("picker-calendar-day")&&(c=t(n.target)),0!==c.length&&(!c.hasClass("picker-calendar-day-selected")||l.params.multiple)&&!c.hasClass("picker-calendar-day-disabled")){c.hasClass("picker-calendar-day-next")&&l.nextMonth(),c.hasClass("picker-calendar-day-prev")&&l.prevMonth();var i=c.attr("data-year"),e=c.attr("data-month"),a=c.attr("data-day");l.params.onDayClick&&l.params.onDayClick(l,c[0],i,e,a),l.addValue(new Date(i,e,a).getTime()),l.params.closeOnSelect&&l.close()}}}var r,h,d,f,m,v,o,p,g,y,s,w,x,T,C,b=!0;l.container.find(".picker-calendar-prev-month").on("click",l.prevMonth),l.container.find(".picker-calendar-next-month").on("click",l.nextMonth),l.container.find(".picker-calendar-prev-year").on("click",l.prevYear),l.container.find(".picker-calendar-next-year").on("click",l.nextYear),l.wrapper.on("click",a),l.params.touchMove&&(l.wrapper.on(t.touchEvents.start,c),l.wrapper.on(t.touchEvents.move,i),l.wrapper.on(t.touchEvents.end,e)),l.container[0].f7DestroyCalendarEvents=function(){l.container.find(".picker-calendar-prev-month").off("click",l.prevMonth),l.container.find(".picker-calendar-next-month").off("click",l.nextMonth),l.container.find(".picker-calendar-prev-year").off("click",l.prevYear),l.container.find(".picker-calendar-next-year").off("click",l.nextYear),l.wrapper.off("click",a),l.params.touchMove&&(l.wrapper.off(t.touchEvents.start,c),l.wrapper.off(t.touchEvents.move,i),l.wrapper.off(t.touchEvents.end,e))}},l.destroyCalendarEvents=function(){"f7DestroyCalendarEvents"in l.container[0]&&l.container[0].f7DestroyCalendarEvents()},l.daysInMonth=function(t){var n=new Date(t);return new Date(n.getFullYear(),n.getMonth()+1,0).getDate()},l.monthHTML=function(t,n){t=new Date(t);var c=t.getFullYear(),i=t.getMonth();t.getDate(),"next"===n&&(t=11===i?new Date(c+1,0):new Date(c,i+1,1)),"prev"===n&&(t=0===i?new Date(c-1,11):new Date(c,i-1,1)),("next"===n||"prev"===n)&&(i=t.getMonth(),c=t.getFullYear());var e=l.daysInMonth(new Date(t.getFullYear(),t.getMonth()).getTime()-864e6),a=l.daysInMonth(t),r=new Date(t.getFullYear(),t.getMonth()).getDay();0===r&&(r=7);var h,d,u,f=[],m=6,v=7,o="",p=0+(l.params.firstDay-1),g=(new Date).setHours(0,0,0,0),y=l.params.minDate?new Date(l.params.minDate).getTime():null,s=l.params.maxDate?new Date(l.params.maxDate).getTime():null;if(l.value&&l.value.length)for(d=0;d<l.value.length;d++)f.push(new Date(l.value[d]).setHours(0,0,0,0));for(d=1;m>=d;d++){var w="";for(u=1;v>=u;u++){var x=u;p++;var T=p-r,C="";0>T?(T=e+T+1,C+=" picker-calendar-day-prev",h=new Date(0>i-1?c-1:c,0>i-1?11:i-1,T).getTime()):(T+=1,T>a?(T-=a,C+=" picker-calendar-day-next",h=new Date(i+1>11?c+1:c,i+1>11?0:i+1,T).getTime()):h=new Date(c,i,T).getTime()),h===g&&(C+=" picker-calendar-day-today"),f.indexOf(h)>=0&&(C+=" picker-calendar-day-selected"),l.params.weekendDays.indexOf(x-1)>=0&&(C+=" picker-calendar-day-weekend"),(y&&y>h||s&&h>s)&&(C+=" picker-calendar-day-disabled"),h=new Date(h);var b=h.getFullYear(),k=h.getMonth();w+='<div data-year="'+b+'" data-month="'+k+'" data-day="'+T+'" class="picker-calendar-day'+C+'" data-date="'+(b+"-"+k+"-"+T)+'"><span>'+T+"</span></div>"}o+='<div class="picker-calendar-row">'+w+"</div>"}return o='<div class="picker-calendar-month" data-year="'+c+'" data-month="'+i+'">'+o+"</div>"},l.animating=!1,l.updateCurrentMonthYear=function(t){"undefined"==typeof t?(l.currentMonth=parseInt(l.months.eq(1).attr("data-month"),10),l.currentYear=parseInt(l.months.eq(1).attr("data-year"),10)):(l.currentMonth=parseInt(l.months.eq("next"===t?l.months.length-1:0).attr("data-month"),10),l.currentYear=parseInt(l.months.eq("next"===t?l.months.length-1:0).attr("data-year"),10)),l.container.find(".current-month-value").text(l.params.monthNames[l.currentMonth]),l.container.find(".current-year-value").text(l.currentYear)},l.onMonthChangeStart=function(t){l.updateCurrentMonthYear(t),l.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var n="next"===t?l.months.length-1:0;l.months.eq(n).addClass("picker-calendar-month-current"),l.months.eq("next"===t?n-1:n+1).addClass("next"===t?"picker-calendar-month-prev":"picker-calendar-month-next"),l.params.onMonthYearChangeStart&&l.params.onMonthYearChangeStart(l,l.currentYear,l.currentMonth)},l.onMonthChangeEnd=function(t,n){l.animating=!1;var c,i,e;l.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove(),"undefined"==typeof t&&(t="next",n=!0),n?(l.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove(),i=l.monthHTML(new Date(l.currentYear,l.currentMonth),"prev"),c=l.monthHTML(new Date(l.currentYear,l.currentMonth),"next")):e=l.monthHTML(new Date(l.currentYear,l.currentMonth),t),("next"===t||n)&&l.wrapper.append(e||c),("prev"===t||n)&&l.wrapper.prepend(e||i),l.months=l.wrapper.find(".picker-calendar-month"),l.setMonthsTranslate(l.monthsTranslate),l.params.onMonthAdd&&l.params.onMonthAdd(l,"next"===t?l.months.eq(l.months.length-1)[0]:l.months.eq(0)[0]),l.params.onMonthYearChangeEnd&&l.params.onMonthYearChangeEnd(l,l.currentYear,l.currentMonth)},l.setMonthsTranslate=function(t){t=t||l.monthsTranslate||0,"undefined"==typeof l.monthsTranslate&&(l.monthsTranslate=t),l.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");
var n=100*-(t+1)*u,c=100*-t*u,i=100*-(t-1)*u;l.months.eq(0).transform("translate3d("+(l.isH?n:0)+"%, "+(l.isH?0:n)+"%, 0)").addClass("picker-calendar-month-prev"),l.months.eq(1).transform("translate3d("+(l.isH?c:0)+"%, "+(l.isH?0:c)+"%, 0)").addClass("picker-calendar-month-current"),l.months.eq(2).transform("translate3d("+(l.isH?i:0)+"%, "+(l.isH?0:i)+"%, 0)").addClass("picker-calendar-month-next")},l.nextMonth=function(n){("undefined"==typeof n||"object"==typeof n)&&(n="",l.params.animate||(n=0));var c=parseInt(l.months.eq(l.months.length-1).attr("data-month"),10),i=parseInt(l.months.eq(l.months.length-1).attr("data-year"),10),e=new Date(i,c),a=e.getTime(),r=l.animating?!1:!0;if(l.params.maxDate&&a>new Date(l.params.maxDate).getTime())return l.resetMonth();if(l.monthsTranslate--,c===l.currentMonth){var h=100*-l.monthsTranslate*u,d=t(l.monthHTML(a,"next")).transform("translate3d("+(l.isH?h:0)+"%, "+(l.isH?0:h)+"%, 0)").addClass("picker-calendar-month-next");l.wrapper.append(d[0]),l.months=l.wrapper.find(".picker-calendar-month"),l.params.onMonthAdd&&l.params.onMonthAdd(l,l.months.eq(l.months.length-1)[0])}l.animating=!0,l.onMonthChangeStart("next");var f=100*l.monthsTranslate*u;l.wrapper.transition(n).transform("translate3d("+(l.isH?f:0)+"%, "+(l.isH?0:f)+"%, 0)"),r&&l.wrapper.transitionEnd(function(){l.onMonthChangeEnd("next")}),l.params.animate||l.onMonthChangeEnd("next")},l.prevMonth=function(n){("undefined"==typeof n||"object"==typeof n)&&(n="",l.params.animate||(n=0));var c=parseInt(l.months.eq(0).attr("data-month"),10),i=parseInt(l.months.eq(0).attr("data-year"),10),e=new Date(i,c+1,-1),a=e.getTime(),r=l.animating?!1:!0;if(l.params.minDate&&a<new Date(l.params.minDate).getTime())return l.resetMonth();if(l.monthsTranslate++,c===l.currentMonth){var h=100*-l.monthsTranslate*u,d=t(l.monthHTML(a,"prev")).transform("translate3d("+(l.isH?h:0)+"%, "+(l.isH?0:h)+"%, 0)").addClass("picker-calendar-month-prev");l.wrapper.prepend(d[0]),l.months=l.wrapper.find(".picker-calendar-month"),l.params.onMonthAdd&&l.params.onMonthAdd(l,l.months.eq(0)[0])}l.animating=!0,l.onMonthChangeStart("prev");var f=100*l.monthsTranslate*u;l.wrapper.transition(n).transform("translate3d("+(l.isH?f:0)+"%, "+(l.isH?0:f)+"%, 0)"),r&&l.wrapper.transitionEnd(function(){l.onMonthChangeEnd("prev")}),l.params.animate||l.onMonthChangeEnd("prev")},l.resetMonth=function(t){"undefined"==typeof t&&(t="");var n=100*l.monthsTranslate*u;l.wrapper.transition(t).transform("translate3d("+(l.isH?n:0)+"%, "+(l.isH?0:n)+"%, 0)")},l.setYearMonth=function(t,n,c){"undefined"==typeof t&&(t=l.currentYear),"undefined"==typeof n&&(n=l.currentMonth),("undefined"==typeof c||"object"==typeof c)&&(c="",l.params.animate||(c=0));var i;if(i=t<l.currentYear?new Date(t,n+1,-1).getTime():new Date(t,n).getTime(),l.params.maxDate&&i>new Date(l.params.maxDate).getTime())return!1;if(l.params.minDate&&i<new Date(l.params.minDate).getTime())return!1;var e=new Date(l.currentYear,l.currentMonth).getTime(),a=i>e?"next":"prev",r=l.monthHTML(new Date(t,n));l.monthsTranslate=l.monthsTranslate||0;var h,d,f=l.monthsTranslate,m=l.animating?!1:!0;i>e?(l.monthsTranslate--,l.animating||l.months.eq(l.months.length-1).remove(),l.wrapper.append(r),l.months=l.wrapper.find(".picker-calendar-month"),h=100*-(f-1)*u,l.months.eq(l.months.length-1).transform("translate3d("+(l.isH?h:0)+"%, "+(l.isH?0:h)+"%, 0)").addClass("picker-calendar-month-next")):(l.monthsTranslate++,l.animating||l.months.eq(0).remove(),l.wrapper.prepend(r),l.months=l.wrapper.find(".picker-calendar-month"),h=100*-(f+1)*u,l.months.eq(0).transform("translate3d("+(l.isH?h:0)+"%, "+(l.isH?0:h)+"%, 0)").addClass("picker-calendar-month-prev")),l.params.onMonthAdd&&l.params.onMonthAdd(l,"next"===a?l.months.eq(l.months.length-1)[0]:l.months.eq(0)[0]),l.animating=!0,l.onMonthChangeStart(a),d=100*l.monthsTranslate*u,l.wrapper.transition(c).transform("translate3d("+(l.isH?d:0)+"%, "+(l.isH?0:d)+"%, 0)"),m&&l.wrapper.transitionEnd(function(){l.onMonthChangeEnd(a,!0)}),l.params.animate||l.onMonthChangeEnd(a)},l.nextYear=function(){l.setYearMonth(l.currentYear+1)},l.prevYear=function(){l.setYearMonth(l.currentYear-1)},l.layout=function(){var t,n="",c="",i=l.value&&l.value.length?l.value[0]:(new Date).setHours(0,0,0,0),e=l.monthHTML(i,"prev"),a=l.monthHTML(i),r=l.monthHTML(i,"next"),h='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(e+a+r)+"</div></div>",d="";if(l.params.weekHeader){for(t=0;7>t;t++){var u=t+l.params.firstDay>6?t-7+l.params.firstDay:t+l.params.firstDay,f=l.params.dayNamesShort[u];d+='<div class="picker-calendar-week-day '+(l.params.weekendDays.indexOf(u)>=0?"picker-calendar-week-day-weekend":"")+'"> '+f+"</div>"}d='<div class="picker-calendar-week-days">'+d+"</div>"}c="picker-modal picker-calendar "+(l.params.cssClass||"");var m=l.params.toolbar?l.params.toolbarTemplate.replace(/{{closeText}}/g,l.params.toolbarCloseText):"";l.params.toolbar&&(m=l.params.toolbarTemplate.replace(/{{closeText}}/g,l.params.toolbarCloseText).replace(/{{monthPicker}}/g,l.params.monthPicker?l.params.monthPickerTemplate:"").replace(/{{yearPicker}}/g,l.params.yearPicker?l.params.yearPickerTemplate:"")),n='<div class="'+c+'">'+m+'<div class="picker-modal-inner">'+d+h+"</div></div>",l.pickerHTML=n},l.params.input&&(l.input=t(l.params.input),l.input.length>0&&(l.params.inputReadOnly&&l.input.prop("readOnly",!0),l.inline||l.input.on("click",e))),l.inline||t("html").on("click",a),l.opened=!1,l.open=function(){var n=!1;l.opened||(l.value||l.params.value&&(l.value=l.params.value,n=!0),l.layout(),l.inline?(l.container=t(l.pickerHTML),l.container.addClass("picker-modal-inline"),t(l.params.container).append(l.container)):(l.container=t(t.pickerModal(l.pickerHTML)),t(l.container).on("close",function(){r()})),l.container[0].f7Calendar=l,l.wrapper=l.container.find(".picker-calendar-months-wrapper"),l.months=l.wrapper.find(".picker-calendar-month"),l.updateCurrentMonthYear(),l.monthsTranslate=0,l.setMonthsTranslate(),l.initCalendarEvents(),n&&l.updateValue()),l.opened=!0,l.initialized=!0,l.params.onMonthAdd&&l.months.each(function(){l.params.onMonthAdd(l,this)}),l.params.onOpen&&l.params.onOpen(l)},l.close=function(){l.opened&&!l.inline&&t.closeModal(l.container)},l.destroy=function(){l.close(),l.params.input&&l.input.length>0&&l.input.off("click",e),t("html").off("click",a)},l.inline&&l.open(),l};t.fn.calendar=function(n){return this.each(function(){var i=t(this);if(i[0]){var e={};"INPUT"===i[0].tagName.toUpperCase()?e.input=i:e.container=i,new c(t.extend(e,n))}})},t.initCalendar=function(n){var c=t(n?n:document.body);c.find("[data-toggle='date']").each(function(){t(this).calendar()})}}(Zepto),+function(t){"use strict";var n=function(n){function c(){if(r.opened)for(var t=0;t<r.cols.length;t++)r.cols[t].divider||(r.cols[t].calcSize(),r.cols[t].setValue(r.cols[t].value,0,!1))}function i(n){if(n.preventDefault(),t.device.isWeixin&&t.device.android&&r.params.inputReadOnly&&(this.focus(),this.blur()),!r.opened&&(r.open(),r.params.scrollToInput)){var c=r.input.parents(".content");if(0===c.length)return;var i,e=parseInt(c.css("padding-top"),10),a=parseInt(c.css("padding-bottom"),10),l=c[0].offsetHeight-e-r.container.height(),h=c[0].scrollHeight-e-r.container.height(),d=r.input.offset().top-e+r.input[0].offsetHeight;if(d>l){var u=c.scrollTop()+d-l;u+l>h&&(i=u+l-h+a,l===h&&(i=r.container.height()),c.css({"padding-bottom":i+"px"})),c.scrollTop(u,300)}}}function e(n){r.opened&&(r.input&&r.input.length>0?n.target!==r.input[0]&&0===t(n.target).parents(".picker-modal").length&&r.close():0===t(n.target).parents(".picker-modal").length&&r.close())}function a(){r.opened=!1,r.input&&r.input.length>0&&r.input.parents(".content").css({"padding-bottom":""}),r.params.onClose&&r.params.onClose(r),r.container.find(".picker-items-col").each(function(){r.destroyPickerCol(this)})}var r=this,l={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,scrollToInput:!0,inputReadOnly:!0,toolbar:!0,toolbarCloseText:"确定",toolbarTemplate:'<header class="bar bar-nav">                <button class="button button-link pull-right close-picker">确定</button>                <h1 class="title">请选择</h1>                </header>'};n=n||{};for(var h in l)"undefined"==typeof n[h]&&(n[h]=l[h]);r.params=n,r.cols=[],r.initialized=!1,r.inline=r.params.container?!0:!1;var d=t.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!t.device.android;return r.setValue=function(t,n){for(var c=0,i=0;i<r.cols.length;i++)r.cols[i]&&!r.cols[i].divider&&(r.cols[i].setValue(t[c],n),c++)},r.updateValue=function(){for(var n=[],c=[],i=0;i<r.cols.length;i++)r.cols[i].divider||(n.push(r.cols[i].value),c.push(r.cols[i].displayValue));n.indexOf(void 0)>=0||(r.value=n,r.displayValue=c,r.params.onChange&&r.params.onChange(r,r.value,r.displayValue),r.input&&r.input.length>0&&(t(r.input).val(r.params.formatValue?r.params.formatValue(r,r.value,r.displayValue):r.value.join(" ")),t(r.input).trigger("change")))},r.initPickerCol=function(n,c){function i(){s=t.requestAnimationFrame(function(){m.updateItems(void 0,void 0,0),i()})}function e(n){x||w||(n.preventDefault(),w=!0,T=C="touchstart"===n.type?n.targetTouches[0].pageY:n.pageY,b=(new Date).getTime(),Y=!0,S=M=t.getTranslate(m.wrapper[0],"y"))}function a(n){if(w){n.preventDefault(),Y=!1,C="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY,x||(t.cancelAnimationFrame(s),x=!0,S=M=t.getTranslate(m.wrapper[0],"y"),m.wrapper.transition(0)),n.preventDefault();var c=C-T;M=S+c,E=void 0,g>M&&(M=g-Math.pow(g-M,.8),E="min"),M>y&&(M=y+Math.pow(M-y,.8),E="max"),m.wrapper.transform("translate3d(0,"+M+"px,0)"),m.updateItems(void 0,M,0,r.params.updateValuesOnTouchmove),D=M-P||M,_=(new Date).getTime(),P=M}}function l(){if(!w||!x)return void(w=x=!1);w=x=!1,m.wrapper.transition(""),E&&m.wrapper.transform("min"===E?"translate3d(0,"+g+"px,0)":"translate3d(0,"+y+"px,0)"),k=(new Date).getTime();var c,e;k-b>300?e=M:(c=Math.abs(D/(k-_)),e=M+D*r.params.momentumRatio),e=Math.max(Math.min(e,y),g);var n=-Math.floor((e-y)/o);r.params.freeMode||(e=-n*o+y),m.wrapper.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),m.updateItems(n,e,"",!0),r.params.updateValuesOnMomentum&&(i(),m.wrapper.transitionEnd(function(){t.cancelAnimationFrame(s)})),setTimeout(function(){Y=!0},100)}function h(){if(Y){t.cancelAnimationFrame(s);var c=t(this).attr("data-picker-value");m.setValue(c)}}var u=t(n),f=u.index(),m=r.cols[f];if(!m.divider){m.container=u,m.wrapper=m.container.find(".picker-items-col-wrapper"),m.items=m.wrapper.find(".picker-item");var v,o,p,g,y;m.replaceValues=function(t,n){m.destroyEvents(),m.values=t,m.displayValues=n;var c=r.columnHTML(m,!0);m.wrapper.html(c),m.items=m.wrapper.find(".picker-item"),m.calcSize(),m.setValue(m.values[0],0,!0),m.initEvents()},m.calcSize=function(){r.params.rotateEffect&&(m.container.removeClass("picker-items-col-absolute"),m.width||m.container.css({width:""}));var n,c;n=0,c=m.container[0].offsetHeight,v=m.wrapper[0].offsetHeight,o=m.items[0].offsetHeight,p=o*m.items.length,g=c/2-p+o/2,y=c/2-o/2,m.width&&(n=m.width,parseInt(n,10)===n&&(n+="px"),m.container.css({width:n})),r.params.rotateEffect&&(m.width||(m.items.each(function(){var c=t(this);c.css({width:"auto"}),n=Math.max(n,c[0].offsetWidth),c.css({width:""})}),m.container.css({width:n+2+"px"})),m.container.addClass("picker-items-col-absolute"))},m.calcSize(),m.wrapper.transform("translate3d(0,"+y+"px,0)").transition(0);var s;m.setValue=function(n,c,e){"undefined"==typeof c&&(c="");var a=m.wrapper.find('.picker-item[data-picker-value="'+n+'"]').index();if("undefined"!=typeof a&&-1!==a){var l=-a*o+y;m.wrapper.transition(c),m.wrapper.transform("translate3d(0,"+l+"px,0)"),r.params.updateValuesOnMomentum&&m.activeIndex&&m.activeIndex!==a&&(t.cancelAnimationFrame(s),m.wrapper.transitionEnd(function(){t.cancelAnimationFrame(s)}),i()),m.updateItems(a,l,c,e)}},m.updateItems=function(n,c,i,e){"undefined"==typeof c&&(c=t.getTranslate(m.wrapper[0],"y")),"undefined"==typeof n&&(n=-Math.round((c-y)/o)),0>n&&(n=0),n>=m.items.length&&(n=m.items.length-1);var a=m.activeIndex;m.activeIndex=n,m.wrapper.find(".picker-selected").removeClass("picker-selected"),r.params.rotateEffect&&m.items.transition(i);var l=m.items.eq(n).addClass("picker-selected").transform("");(e||"undefined"==typeof e)&&(m.value=l.attr("data-picker-value"),m.displayValue=m.displayValues?m.displayValues[n]:m.value,a!==n&&(m.onChange&&m.onChange(r,m.value,m.displayValue),r.updateValue())),r.params.rotateEffect&&((c-(Math.floor((c-y)/o)*o+y))/o,m.items.each(function(){var n=t(this),i=n.index()*o,e=y-c,a=i-e,r=a/o,l=Math.ceil(m.height/o/2)+1,h=-18*r;h>180&&(h=180),-180>h&&(h=-180),Math.abs(r)>l?n.addClass("picker-item-far"):n.removeClass("picker-item-far"),n.transform("translate3d(0, "+(-c+y)+"px, "+(d?-110:0)+"px) rotateX("+h+"deg)")}))},c&&m.updateItems(0,y,0);var w,x,T,C,b,k,S,E,M,P,D,_,Y=!0;m.initEvents=function(n){var c=n?"off":"on";m.container[c](t.touchEvents.start,e),m.container[c](t.touchEvents.move,a),m.container[c](t.touchEvents.end,l),m.items[c]("click",h)},m.destroyEvents=function(){m.initEvents(!0)},m.container[0].f7DestroyPickerCol=function(){m.destroyEvents()},m.initEvents()}},r.destroyPickerCol=function(n){n=t(n),"f7DestroyPickerCol"in n[0]&&n[0].f7DestroyPickerCol()},t(window).on("resize",c),r.columnHTML=function(t,n){var c="",i="";if(t.divider)i+='<div class="picker-items-col picker-items-col-divider '+(t.textAlign?"picker-items-col-"+t.textAlign:"")+" "+(t.cssClass||"")+'">'+t.content+"</div>";else{for(var e=0;e<t.values.length;e++)c+='<div class="picker-item" data-picker-value="'+t.values[e]+'">'+(t.displayValues?t.displayValues[e]:t.values[e])+"</div>";i+='<div class="picker-items-col '+(t.textAlign?"picker-items-col-"+t.textAlign:"")+" "+(t.cssClass||"")+'"><div class="picker-items-col-wrapper">'+c+"</div></div>"}return n?c:i},r.layout=function(){var t,n="",c="";r.cols=[];var i="";for(t=0;t<r.params.cols.length;t++){var e=r.params.cols[t];i+=r.columnHTML(r.params.cols[t]),r.cols.push(e)}c="picker-modal picker-columns "+(r.params.cssClass||"")+(r.params.rotateEffect?" picker-3d":""),n='<div class="'+c+'">'+(r.params.toolbar?r.params.toolbarTemplate.replace(/{{closeText}}/g,r.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+i+'<div class="picker-center-highlight"></div></div></div>',r.pickerHTML=n},r.params.input&&(r.input=t(r.params.input),r.input.length>0&&(r.params.inputReadOnly&&r.input.prop("readOnly",!0),r.inline||r.input.on("click",i))),r.inline||t("html").on("click",e),r.opened=!1,r.open=function(){r.opened||(r.layout(),r.inline?(r.container=t(r.pickerHTML),r.container.addClass("picker-modal-inline"),t(r.params.container).append(r.container),r.opened=!0):(r.container=t(t.pickerModal(r.pickerHTML)),t(r.container).one("opened",function(){r.opened=!0}).on("close",function(){a()})),r.container[0].f7Picker=r,r.container.find(".picker-items-col").each(function(){var t=!0;(!r.initialized&&r.params.value||r.initialized&&r.value)&&(t=!1),r.initPickerCol(this,t)}),r.initialized?r.value&&r.setValue(r.value,0):r.params.value&&r.setValue(r.params.value,0)),r.initialized=!0,r.params.onOpen&&r.params.onOpen(r)},r.close=function(){r.opened&&!r.inline&&t.closeModal(r.container)},r.destroy=function(){r.close(),r.params.input&&r.input.length>0&&r.input.off("click",i),t("html").off("click",e),t(window).off("resize",c)},r.inline&&r.open(),r};t(document).on("click",".close-picker",function(){var n=t(".picker-modal.modal-in");t.closeModal(n)}),t.fn.picker=function(c){var i=arguments;return this.each(function(){if(this){var e=t(this),a=e.data("picker");if(!a){var r=t.extend({input:this,value:e.val()?e.val().split(" "):""},c);a=new n(r),e.data("picker",a)}"string"==typeof c&&a[c].apply(a,Array.prototype.slice.call(i,1))}})}}(Zepto),+function(t){"use strict";var n=new Date,c=function(t){for(var n=[],c=1;(t||31)>=c;c++)n.push(10>c?"0"+c:c);return n},i=function(t,n){var i=new Date(n,parseInt(t)+1-1,1),e=new Date(i-1);return c(e.getDate())},e=function(t){return 10>t?"0"+t:t},a="01 02 03 04 05 06 07 08 09 10 11 12".split(" "),r=function(){for(var t=[],n=1950;2030>=n;n++)t.push(n);return t}(),l={rotateEffect:!1,value:[n.getFullYear(),e(n.getMonth()+1),e(n.getDate()),n.getHours(),e(n.getMinutes())],onChange:function(t){var e=i(t.cols[1].value,t.cols[0].value),n=t.cols[2].value;n>e.length&&(n=e.length),t.cols[2].setValue(n)},formatValue:function(t,n,c){return c[0]+"-"+n[1]+"-"+n[2]+" "+n[3]+":"+n[4]},cols:[{values:r},{values:a},{values:c()},{divider:!0,content:"  "},{values:function(){for(var t=[],n=0;23>=n;n++)t.push(n);return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],n=0;59>=n;n++)t.push(10>n?"0"+n:n);return t}()}]};t.fn.datetimePicker=function(n){return this.each(function(){if(this){var c=t.extend(l,n);t(this).picker(c),n.value&&t(this).val(c.formatValue(c,c.value,c.value))}})}}(Zepto),+function(t){"use strict";function n(t,n){this.wrapper="string"==typeof t?document.querySelector(t):t,this.scroller=$(this.wrapper).find(".content-inner")[0],this.scrollerStyle=this.scroller&&this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,eventPassthrough:void 0};for(var c in n)this.options[c]=n[c];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"===this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"===this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"===this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3===this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function c(t,n,c){var i=document.createElement("div"),e=document.createElement("div");return c===!0&&(i.style.cssText="position:absolute;z-index:9999",e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),e.className="iScrollIndicator","h"===t?(c===!0&&(i.style.cssText+=";height:5px;left:2px;right:2px;bottom:0",e.style.height="100%"),i.className="iScrollHorizontalScrollbar"):(c===!0&&(i.style.cssText+=";width:5px;bottom:2px;top:2px;right:1px",e.style.width="100%"),i.className="iScrollVerticalScrollbar"),i.style.cssText+=";overflow:hidden",n||(i.style.pointerEvents="none"),i.appendChild(e),i}function i(n,c){this.wrapper="string"==typeof c.el?document.querySelector(c.el):c.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=n,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var i in c)this.options[i]=c[i];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(a.addEvent(this.indicator,"touchstart",this),a.addEvent(t,"touchend",this)),this.options.disablePointer||(a.addEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.addEvent(t,a.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(a.addEvent(this.indicator,"mousedown",this),a.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[a.style.transform]=this.scroller.translateZ,this.wrapperStyle[a.style.transitionDuration]=a.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(n){t.setTimeout(n,1e3/60)},a=function(){function n(t){return a===!1?!1:""===a?t:a+t.charAt(0).toUpperCase()+t.substr(1)}var c={},i=document.createElement("div").style,a=function(){for(var t,n=["t","webkitT","MozT","msT","OT"],c=0,e=n.length;e>c;c++)if(t=n[c]+"ransform",t in i)return n[c].substr(0,n[c].length-1);return!1}();c.getTime=Date.now||function(){return(new Date).getTime()},c.extend=function(t,n){for(var c in n)t[c]=n[c]},c.addEvent=function(t,n,c,i){t.addEventListener(n,c,!!i)},c.removeEvent=function(t,n,c,i){t.removeEventListener(n,c,!!i)},c.prefixPointerEvent=function(n){return t.MSPointerEvent?"MSPointer"+n.charAt(9).toUpperCase()+n.substr(10):n},c.momentum=function(t,n,c,i,a,r,l){function h(){+new Date-o>50&&(l._execEvent("scroll"),o=+new Date),+new Date-v<u&&e(h)}var d,u,f=t-n,m=Math.abs(f)/c;m/=2,m=m>1.5?1.5:m,r=void 0===r?6e-4:r,d=t+m*m/(2*r)*(0>f?-1:1),u=m/r,i>d?(d=a?i-a/2.5*(m/8):i,f=Math.abs(d-t),u=f/m):d>0&&(d=a?a/2.5*(m/8):0,f=Math.abs(t)+d,u=f/m);var v=+new Date,o=v;return e(h),{destination:Math.round(d),duration:u}};var r=n("transform");return c.extend(c,{hasTransform:r!==!1,hasPerspective:n("perspective")in i,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:n("transition")in i}),c.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion)&&!1,c.extend(c.style={},{transform:r,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")}),c.hasClass=function(t,n){var c=new RegExp("(^|\\s)"+n+"(\\s|$)");return c.test(t.className)},c.addClass=function(t,n){if(!c.hasClass(t,n)){var i=t.className.split(" ");i.push(n),t.className=i.join(" ")}},c.removeClass=function(t,n){if(c.hasClass(t,n)){var i=new RegExp("(^|\\s)"+n+"(\\s|$)","g");t.className=t.className.replace(i," ")}},c.offset=function(t){for(var n=-t.offsetLeft,c=-t.offsetTop;t=t.offsetParent;)n-=t.offsetLeft,c-=t.offsetTop;return{left:n,top:c}},c.preventDefaultException=function(t,n){for(var c in n)if(n[c].test(t[c]))return!0;return!1},c.extend(c.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),c.extend(c.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return Math.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var n=4;return(t-=1)*t*((n+1)*t+n)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var n=.22,c=.4;return 0===t?0:1===t?1:c*Math.pow(2,-10*t)*Math.sin(2*(t-n/4)*Math.PI/n)+1}}}),c.tap=function(t,n){var c=document.createEvent("Event");c.initEvent(n,!0,!0),c.pageX=t.pageX,c.pageY=t.pageY,t.target.dispatchEvent(c)},c.click=function(t){var n,c=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(c.tagName)||(n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,t.view,1,c.screenX,c.screenY,c.clientX,c.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),n._constructed=!0,c.dispatchEvent(n))},c}();n.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target===this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!(1!==a.eventType[t.type]&&0!==t.button||!this.enabled||this.initiated&&a.eventType[t.type]!==this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var n,c=t.touches?t.touches[0]:t;this.initiated=a.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,n=this.getComputedPosition(),this._translate(Math.round(n.x),Math.round(n.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=c.pageX,this.pointY=c.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var n,c,i,e,r=t.touches?t.touches[0]:t,l=r.pageX-this.pointX,h=r.pageY-this.pointY,d=a.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=l,this.distY+=h,i=Math.abs(this.distX),e=Math.abs(this.distY),!(d-this.endTime>300&&10>i&&10>e)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=i>e+this.options.directionLockThreshold?"h":e>=i+this.options.directionLockThreshold?"v":"n"),"h"===this.directionLocked){if("vertical"===this.options.eventPassthrough)t.preventDefault();else if("horizontal"===this.options.eventPassthrough)return void(this.initiated=!1);h=0}else if("v"===this.directionLocked){if("horizontal"===this.options.eventPassthrough)t.preventDefault();else if("vertical"===this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,h=this.hasVerticalScroll?h:0,n=this.x+l,c=this.y+h,(n>0||n<this.maxScrollX)&&(n=this.options.bounce?this.x+l/3:n>0?0:this.maxScrollX),(c>0||c<this.maxScrollY)&&(c=this.options.bounce?this.y+h/3:c>0?0:this.maxScrollY),this.directionX=l>0?-1:0>l?1:0,this.directionY=h>0?-1:0>h?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(n,c),d-this.startTime>300&&(this.startTime=d,this.startX=this.x,this.startY=this.y,1===this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&!a.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var n,c,i=a.getTime()-this.startTime,e=Math.round(this.x),r=Math.round(this.y),l=Math.abs(e-this.startX),h=Math.abs(r-this.startY),d=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(e,r),!this.moved)return this.options.tap&&a.tap(t,this.options.tap),this.options.click&&a.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>i&&100>l&&100>h)return void this._execEvent("flick");if(this.options.momentum&&300>i&&(n=this.hasHorizontalScroll?a.momentum(this.x,this.startX,i,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration,this):{destination:e,duration:0},c=this.hasVerticalScroll?a.momentum(this.y,this.startY,i,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration,this):{destination:r,duration:0},e=n.destination,r=c.destination,d=Math.max(n.duration,c.duration),this.isInTransition=1),this.options.snap){var f=this._nearestSnap(e,r);this.currentPage=f,d=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(e-f.x),1e3),Math.min(Math.abs(r-f.y),1e3)),300),e=f.x,r=f.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}return e!==this.x||r!==this.y?((e>0||e<this.maxScrollX||r>0||r<this.maxScrollY)&&(u=a.ease.quadratic),void this.scrollTo(e,r,d,u)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(n){var c=this.x,i=this.y;if(n=n||0,!this.hasHorizontalScroll||this.x>0?c=0:this.x<this.maxScrollX&&(c=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),c===this.x&&i===this.y)return!1;if(this.options.ptr&&this.y>44&&-1*this.startY<$(t).height()&&!this.ptrLock){i=this.options.ptrOffset||44,this._execEvent("ptr"),this.ptrLock=!0;var e=this;setTimeout(function(){e.ptrLock=!1},500)}return this.scrollTo(c,i,n,this.options.bounceEasing),!0},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,n){this._events[t]||(this._events[t]=[]),this._events[t].push(n)},off:function(t,n){if(this._events[t]){var c=this._events[t].indexOf(n);c>-1&&this._events[t].splice(c,1)}},_execEvent:function(t){if(this._events[t]){var n=0,c=this._events[t].length;if(c)for(;c>n;n++)this._events[t][n].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,n,c,i){t=this.x+t,n=this.y+n,c=c||0,this.scrollTo(t,n,c,i)},scrollTo:function(t,n,c,i){i=i||a.ease.circular,this.isInTransition=this.options.useTransition&&c>0,!c||this.options.useTransition&&i.style?(this._transitionTimingFunction(i.style),this._transitionTime(c),this._translate(t,n)):this._animate(t,n,c,i.fn)},scrollToElement:function(t,n,c,i,e){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=a.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,c===!0&&(c=Math.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),i===!0&&(i=Math.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=c||0,r.top-=i||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,n=void 0===n||null===n||"auto"===n?Math.max(Math.abs(this.x-r.left),Math.abs(this.y-r.top)):n,this.scrollTo(r.left,r.top,n,e)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.scrollerStyle[a.style.transitionDuration]="0.001s"),this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[a.style.transitionTimingFunction]=t,this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].transitionTimingFunction(t)
},_translate:function(t,n){if(this.options.useTransform?this.scrollerStyle[a.style.transform]="translate("+t+"px,"+n+"px)"+this.translateZ:(t=Math.round(t),n=Math.round(n),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=n+"px"),this.x=t,this.y=n,this.indicators)for(var c=this.indicators.length;c--;)this.indicators[c].updatePosition()},_initEvents:function(n){var c=n?a.removeEvent:a.addEvent,i=this.options.bindToWrapper?this.wrapper:t;c(t,"orientationchange",this),c(t,"resize",this),this.options.click&&c(this.wrapper,"click",this,!0),this.options.disableMouse||(c(this.wrapper,"mousedown",this),c(i,"mousemove",this),c(i,"mousecancel",this),c(i,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(c(this.wrapper,a.prefixPointerEvent("pointerdown"),this),c(i,a.prefixPointerEvent("pointermove"),this),c(i,a.prefixPointerEvent("pointercancel"),this),c(i,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(c(this.wrapper,"touchstart",this),c(i,"touchmove",this),c(i,"touchcancel",this),c(i,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var n,c,i=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(i=i[a.style.transform].split(")")[0].split(", "),n=+(i[12]||i[4]),c=+(i[13]||i[5])):(n=+i.left.replace(/[^-\d.]/g,""),c=+i.top.replace(/[^-\d.]/g,"")),{x:n,y:c}},_initIndicators:function(){function t(t){for(var n=l.indicators.length;n--;)t.call(l.indicators[n])}var n,e=this.options.interactiveScrollbars,a="string"!=typeof this.options.scrollbars,r=[],l=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(n={el:c("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:a,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(n.el),r.push(n)),this.options.scrollX&&(n={el:c("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:a,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(n.el),r.push(n))),this.options.indicators&&(r=r.concat(this.options.indicators));for(var h=r.length;h--;)this.indicators.push(new i(this,r[h]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){a.addEvent(this.wrapper,"wheel",this),a.addEvent(this.wrapper,"mousewheel",this),a.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){a.removeEvent(this.wrapper,"wheel",this),a.removeEvent(this.wrapper,"mousewheel",this),a.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var n,c,i,e,a=this;if(void 0===this.wheelTimeout&&a._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){a._execEvent("scrollEnd"),a.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(n=-t.deltaX*this.options.mouseWheelSpeed,c=-t.deltaY*this.options.mouseWheelSpeed):(n=-t.deltaX,c=-t.deltaY);else if("wheelDeltaX"in t)n=t.wheelDeltaX/120*this.options.mouseWheelSpeed,c=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)n=c=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;n=c=-t.detail/3*this.options.mouseWheelSpeed}if(n*=this.options.invertWheelDirection,c*=this.options.invertWheelDirection,this.hasVerticalScroll||(n=c,c=0),this.options.snap)return i=this.currentPage.pageX,e=this.currentPage.pageY,n>0?i--:0>n&&i++,c>0?e--:0>c&&e++,void this.goToPage(i,e);i=this.x+Math.round(this.hasHorizontalScroll?n:0),e=this.y+Math.round(this.hasVerticalScroll?c:0),i>0?i=0:i<this.maxScrollX&&(i=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY),this.scrollTo(i,e,0),this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,n,c,i,e,a,r=0,l=0,h=0,d=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(c=Math.round(d/2),i=Math.round(u/2);h>-this.scrollerWidth;){for(this.pages[r]=[],t=0,e=0;e>-this.scrollerHeight;)this.pages[r][t]={x:Math.max(h,this.maxScrollX),y:Math.max(e,this.maxScrollY),width:d,height:u,cx:h-c,cy:e-i},e-=u,t++;h-=d,r++}else for(a=this.options.snap,t=a.length,n=-1;t>r;r++)(0===r||a[r].offsetLeft<=a[r-1].offsetLeft)&&(l=0,n++),this.pages[l]||(this.pages[l]=[]),h=Math.max(-a[r].offsetLeft,this.maxScrollX),e=Math.max(-a[r].offsetTop,this.maxScrollY),c=h-Math.round(a[r].offsetWidth/2),i=e-Math.round(a[r].offsetHeight/2),this.pages[l][n]={x:h,y:e,width:a[r].offsetWidth,height:a[r].offsetHeight,cx:c,cy:i},h>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.x-this.startX),1e3),Math.min(Math.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,n){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var c=0,i=this.pages.length,e=0;if(Math.abs(t-this.absStartX)<this.snapThresholdX&&Math.abs(n-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY);i>c;c++)if(t>=this.pages[c][0].cx){t=this.pages[c][0].x;break}for(i=this.pages[c].length;i>e;e++)if(n>=this.pages[0][e].cy){n=this.pages[0][e].y;break}return c===this.currentPage.pageX&&(c+=this.directionX,0>c?c=0:c>=this.pages.length&&(c=this.pages.length-1),t=this.pages[c][0].x),e===this.currentPage.pageY&&(e+=this.directionY,0>e?e=0:e>=this.pages[0].length&&(e=this.pages[0].length-1),n=this.pages[0][e].y),{x:t,y:n,pageX:c,pageY:e}},goToPage:function(t,n,c,i){i=i||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),n>=this.pages[t].length?n=this.pages[t].length-1:0>n&&(n=0);var e=this.pages[t][n].x,a=this.pages[t][n].y;c=void 0===c?this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(e-this.x),1e3),Math.min(Math.abs(a-this.y),1e3)),300):c,this.currentPage={x:e,y:a,pageX:t,pageY:n},this.scrollTo(e,a,c,i)},next:function(t,n){var c=this.currentPage.pageX,i=this.currentPage.pageY;c++,c>=this.pages.length&&this.hasVerticalScroll&&(c=0,i++),this.goToPage(c,i,t,n)},prev:function(t,n){var c=this.currentPage.pageX,i=this.currentPage.pageY;c--,0>c&&this.hasVerticalScroll&&(c=0,i--),this.goToPage(c,i,t,n)},_initKeys:function(){var n,c={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(n in this.options.keyBindings)"string"==typeof this.options.keyBindings[n]&&(this.options.keyBindings[n]=this.options.keyBindings[n].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(n in c)this.options.keyBindings[n]=this.options.keyBindings[n]||c[n];a.addEvent(t,"keydown",this),this.on("destroy",function(){a.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var n,c=this.options.snap,i=c?this.currentPage.pageX:this.x,e=c?this.currentPage.pageY:this.y,r=a.getTime(),l=this.keyTime||0,h=.25;switch(this.options.useTransition&&this.isInTransition&&(n=this.getComputedPosition(),this._translate(Math.round(n.x),Math.round(n.y)),this.isInTransition=!1),this.keyAcceleration=200>r-l?Math.min(this.keyAcceleration+h,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?i+=c?1:this.wrapperWidth:e+=c?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?i-=c?1:this.wrapperWidth:e-=c?1:this.wrapperHeight;break;case this.options.keyBindings.end:i=c?this.pages.length-1:this.maxScrollX,e=c?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:i=0,e=0;break;case this.options.keyBindings.left:i+=c?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:e+=c?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:i-=c?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:e-=c?1:5+this.keyAcceleration>>0;break;default:return}if(c)return void this.goToPage(i,e);i>0?(i=0,this.keyAcceleration=0):i<this.maxScrollX&&(i=this.maxScrollX,this.keyAcceleration=0),e>0?(e=0,this.keyAcceleration=0):e<this.maxScrollY&&(e=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(i,e,0),this.keyTime=r}},_animate:function(t,n,c,i){function r(){var m,v,o,p=a.getTime();return p>=f?(l.isAnimating=!1,l._translate(t,n),void(l.resetPosition(l.options.bounceTime)||l._execEvent("scrollEnd"))):(p=(p-u)/c,o=i(p),m=(t-h)*o+h,v=(n-d)*o+d,l._translate(m,v),l.isAnimating&&e(r),void(3===l.options.probeType&&l._execEvent("scroll")))}var l=this,h=this.x,d=this.y,u=a.getTime(),f=u+c;this.isAnimating=!0,r()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},i.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(a.removeEvent(this.indicator,"touchstart",this),a.removeEvent(this.indicator,a.prefixPointerEvent("pointerdown"),this),a.removeEvent(this.indicator,"mousedown",this),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),a.removeEvent(t,"touchend",this),a.removeEvent(t,a.prefixPointerEvent("pointerup"),this),a.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(n){var c=n.touches?n.touches[0]:n;n.preventDefault(),n.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=c.pageX,this.lastPointY=c.pageY,this.startTime=a.getTime(),this.options.disableTouch||a.addEvent(t,"touchmove",this),this.options.disablePointer||a.addEvent(t,a.prefixPointerEvent("pointermove"),this),this.options.disableMouse||a.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var n,c,i,e,r=t.touches?t.touches[0]:t,l=a.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,n=r.pageX-this.lastPointX,this.lastPointX=r.pageX,c=r.pageY-this.lastPointY,this.lastPointY=r.pageY,i=this.x+n,e=this.y+c,this._pos(i,e),1===this.scroller.options.probeType&&l-this.startTime>300?(this.startTime=l,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},_end:function(n){if(this.initiated){if(this.initiated=!1,n.preventDefault(),n.stopPropagation(),a.removeEvent(t,"touchmove",this),a.removeEvent(t,a.prefixPointerEvent("pointermove"),this),a.removeEvent(t,"mousemove",this),this.scroller.options.snap){var c=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),i=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.scroller.x-c.x),1e3),Math.min(Math.abs(this.scroller.y-c.y),1e3)),300);(this.scroller.x!==c.x||this.scroller.y!==c.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=c,this.scroller.scrollTo(c.x,c.y,i,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.indicatorStyle[a.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[a.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(a.addClass(this.wrapper,"iScrollBothScrollbars"),a.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(a.removeClass(this.wrapper,"iScrollBothScrollbars"),a.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px")),this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=Math.max(Math.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"===this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=Math.max(Math.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"===this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&Math.round(this.sizeRatioX*this.scroller.x)||0,n=this.options.listenY&&Math.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"===this.options.shrink&&(this.width=Math.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"===this.options.shrink?(this.width=Math.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"===this.options.shrink&&this.width!==this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),n<this.minBoundaryY?("scale"===this.options.shrink&&(this.height=Math.max(this.indicatorHeight+3*n,8),this.indicatorStyle.height=this.height+"px"),n=this.minBoundaryY):n>this.maxBoundaryY?"scale"===this.options.shrink?(this.height=Math.max(this.indicatorHeight-3*(n-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",n=this.maxPosY+this.indicatorHeight-this.height):n=this.maxBoundaryY:"scale"===this.options.shrink&&this.height!==this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=n,this.scroller.options.useTransform?this.indicatorStyle[a.style.transform]="translate("+t+"px,"+n+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=n+"px")},_pos:function(t,n){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>n?n=0:n>this.maxPosY&&(n=this.maxPosY),t=this.options.listenX?Math.round(t/this.sizeRatioX):this.scroller.x,n=this.options.listenY?Math.round(n/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,n)},fade:function(t,n){if(!n||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var c=t?250:500,i=t?0:300;t=t?"1":"0",this.wrapperStyle[a.style.transitionDuration]=c+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),i)}}},n.utils=a,t.IScroll=n}(window),+function(t){"use strict";function n(n){var c=Array.apply(null,arguments);c.shift();var e;return this.each(function(){var a=t(this),r=t.extend({},a.dataset(),"object"==typeof n&&n),l=a.data("scroller");return l||a.data("scroller",l=new i(this,r)),"string"==typeof n&&"function"==typeof l[n]&&(e=l[n].apply(l,c),void 0!==e)?!1:void 0}),void 0!==e?e:this}var c={scrollTop:t.fn.scrollTop,scrollLeft:t.fn.scrollLeft};!function(){t.extend(t.fn,{scrollTop:function(t,n){if(this.length){var i=this.data("scroller");return i&&i.scroller?i.scrollTop(t,n):c.scrollTop.apply(this,arguments)}}}),t.extend(t.fn,{scrollLeft:function(t,n){if(this.length){var i=this.data("scroller");return i&&i.scroller?i.scrollLeft(t,n):c.scrollLeft.apply(this,arguments)}}})}();var i=function(n,c){var i=this.$pageContent=t(n);this.options=t.extend({},this._defaults,c);var e=this.options.type,a="js"===e||"auto"===e&&t.device.android&&t.compareVersion("4.4.0",t.device.osVersion)>-1||"auto"===e&&t.device.ios&&t.compareVersion("6.0.0",t.device.osVersion)>-1;if(a){var r=i.find(".content-inner");if(!r[0]){var l=i.children();l.length<1?i.children().wrapAll('<div class="content-inner"></div>'):i.html('<div class="content-inner">'+i.html()+"</div>")}if(i.hasClass("pull-to-refresh-content")){var h=t(window).height()+(i.prev().hasClass(".bar")?1:61);i.find(".content-inner").css("min-height",h+"px")}var d=t(n).hasClass("pull-to-refresh-content"),u=0===i.find(".fixed-tab").length,f={probeType:1,mouseWheel:!0,click:t.device.androidChrome,useTransform:u,scrollX:!0};d&&(f.ptr=!0,f.ptrOffset=44),this.scroller=new IScroll(n,f),this._bindEventToDomWhenJs(),t.initPullToRefresh=t._pullToRefreshJSScroll.initPullToRefresh,t.pullToRefreshDone=t._pullToRefreshJSScroll.pullToRefreshDone,t.pullToRefreshTrigger=t._pullToRefreshJSScroll.pullToRefreshTrigger,t.destroyToRefresh=t._pullToRefreshJSScroll.destroyToRefresh,i.addClass("javascript-scroll"),u||i.find(".content-inner").css({width:"100%",position:"absolute"});var m=this.$pageContent[0].scrollTop;m&&(this.$pageContent[0].scrollTop=0,this.scrollTop(m))}else i.addClass("native-scroll")};i.prototype={_defaults:{type:"native"},_bindEventToDomWhenJs:function(){if(this.scroller){var t=this;this.scroller.on("scrollStart",function(){t.$pageContent.trigger("scrollstart")}),this.scroller.on("scroll",function(){t.$pageContent.trigger("scroll")}),this.scroller.on("scrollEnd",function(){t.$pageContent.trigger("scrollend")})}},scrollTop:function(t,n){return this.scroller?void 0===t?-1*this.scroller.getComputedPosition().y:(this.scroller.scrollTo(0,-1*t,n),this):this.$pageContent.scrollTop(t,n)},scrollLeft:function(t,n){return this.scroller?void 0===t?-1*this.scroller.getComputedPosition().x:(this.scroller.scrollTo(-1*t,0),this):this.$pageContent.scrollTop(t,n)},on:function(t,n){return this.scroller?this.scroller.on(t,function(){n.call(this.wrapper)}):this.$pageContent.on(t,n),this},off:function(t,n){return this.scroller?this.scroller.off(t,n):this.$pageContent.off(t,n),this},refresh:function(){return this.scroller&&this.scroller.refresh(),this},scrollHeight:function(){return this.scroller?this.scroller.scrollerHeight:this.$pageContent[0].scrollHeight}};var e=t.fn.scroller;t.fn.scroller=n,t.fn.scroller.Constructor=i,t.fn.scroller.noConflict=function(){return t.fn.scroller=e,this},t(function(){t('[data-toggle="scroller"]').scroller()}),t.refreshScroller=function(n){n?t(n).scroller("refresh"):t(".javascript-scroll").each(function(){t(this).scroller("refresh")})},t.initScroller=function(n){this.options=t.extend({},"object"==typeof n&&n),t('[data-toggle="scroller"],.content').scroller(n)},t.getScroller=function(n){return n=n.hasClass("content")?n:n.parents(".content"),n?t(n).data("scroller"):t(".content.javascript-scroll").data("scroller")},t.detectScrollerType=function(n){return n?t(n).data("scroller")&&t(n).data("scroller").scroller?"js":"native":void 0}}(Zepto),+function(t){"use strict";var n=function(n,c,i){var e=t(n);if(2===arguments.length&&"boolean"==typeof c&&(i=c),0===e.length)return!1;if(e.hasClass("active"))return i&&e.trigger("show"),!1;var a=e.parent(".tabs");if(0===a.length)return!1;var r=a.children(".tab.active").removeClass("active");if(e.addClass("active"),e.trigger("show"),c?c=t(c):(c=t("string"==typeof n?'.tab-link[href="'+n+'"]':'.tab-link[href="#'+e.attr("id")+'"]'),(!c||c&&0===c.length)&&t("[data-tab]").each(function(){e.is(t(this).attr("data-tab"))&&(c=t(this))})),0!==c.length){var l;if(r&&r.length>0){var h=r.attr("id");h&&(l=t('.tab-link[href="#'+h+'"]')),(!l||l&&0===l.length)&&t("[data-tab]").each(function(){r.is(t(this).attr("data-tab"))&&(l=t(this))})}return c&&c.length>0&&c.addClass("active"),l&&l.length>0&&l.removeClass("active"),c.trigger("active"),!0}},c=t.showTab;t.showTab=n,t.showTab.noConflict=function(){return t.showTab=c,this},t(document).on("click",".tab-link",function(c){c.preventDefault();var i=t(this);n(i.data("tab")||i.attr("href"),i)})}(Zepto),+function(t){"use strict";function n(n){var i=Array.apply(null,arguments);i.shift(),this.each(function(){var i=t(this),e=t.extend({},i.dataset(),"object"==typeof n&&n),a=i.data("fixedtab");a||i.data("fixedtab",a=new c(this,e))})}t.initFixedTab=function(){var n=t(".fixed-tab");0!==n.length&&t(".fixed-tab").fixedTab()};var c=function(n,c){var i=this.$pageContent=t(n),e=i.clone(),a=i[0].getBoundingClientRect().top;e.css("visibility","hidden"),this.options=t.extend({},this._defaults,{fixedTop:a,shadow:e,offset:0},c),this._bindEvents()};c.prototype={_defaults:{offset:0},_bindEvents:function(){this.$pageContent.parents(".content").on("scroll",this._scrollHandler.bind(this)),this.$pageContent.on("active",".tab-link",this._tabLinkHandler.bind(this))},_tabLinkHandler:function(n){var c=t(n.target).parents(".buttons-fixed").length>0,i=this.options.fixedTop,e=this.options.offset;t.refreshScroller(),c&&this.$pageContent.parents(".content").scrollTop(i-e)},_scrollHandler:function(n){var c=t(n.target),i=this.$pageContent,e=this.options.shadow,a=this.options.offset,r=this.options.fixedTop,l=c.scrollTop(),h=l>=r-a;h?(e.insertAfter(i),i.addClass("buttons-fixed").css("top",a)):(e.remove(),i.removeClass("buttons-fixed").css("top",0))}},t.fn.fixedTab=n,t.fn.fixedTab.Constructor=c,t(document).on("pageInit",function(){t.initFixedTab()})}(Zepto),+function(t){"use strict";var n=0,c=function(c){function i(){d.hasClass("refreshing")||(-1*h.scrollTop()>=44?d.removeClass("pull-down").addClass("pull-up"):d.removeClass("pull-up").addClass("pull-down"))}function e(){d.hasClass("refreshing")||(d.removeClass("pull-down pull-up"),d.addClass("refreshing transitioning"),d.trigger("refresh"),n=+new Date)}function a(){h.off("scroll",i),h.scroller.off("ptr",e)}var r=t(c);if(r.hasClass("pull-to-refresh-content")||(r=r.find(".pull-to-refresh-content")),r&&0!==r.length){var l=r.hasClass("content")?r:r.parents(".content"),h=t.getScroller(l[0]);if(h){var d=r;h.on("scroll",i),h.scroller.on("ptr",e),r[0].destroyPullToRefresh=a}}},i=function(c){if(c=t(c),0===c.length&&(c=t(".pull-to-refresh-content.refreshing")),0!==c.length){var i=+new Date-n,e=i>1e3?0:1e3-i,a=t.getScroller(c);setTimeout(function(){a.refresh(),c.removeClass("refreshing"),c.transitionEnd(function(){c.removeClass("transitioning")})},e)}},e=function(n){if(n=t(n),0===n.length&&(n=t(".pull-to-refresh-content")),!n.hasClass("refreshing")){n.addClass("refreshing");var c=t.getScroller(n);c.scrollTop(45,200),n.trigger("refresh")}},a=function(n){n=t(n);var c=n.hasClass("pull-to-refresh-content")?n:n.find(".pull-to-refresh-content");0!==c.length&&c[0].destroyPullToRefresh&&c[0].destroyPullToRefresh()};t._pullToRefreshJSScroll={initPullToRefresh:c,pullToRefreshDone:i,pullToRefreshTrigger:e,destroyPullToRefresh:a}}(Zepto),+function(t){"use strict";t.initPullToRefresh=function(n){function c(n){if(l){if(!t.device.android)return;if("targetTouches"in n&&n.targetTouches.length>1)return}h=!1,l=!0,d=void 0,p=void 0,s.x="touchstart"===n.type?n.targetTouches[0].pageX:n.pageX,s.y="touchstart"===n.type?n.targetTouches[0].pageY:n.pageY,f=(new Date).getTime(),m=t(this)}function i(n){if(l){var c="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,i="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if("undefined"==typeof d&&(d=!!(d||Math.abs(i-s.y)>Math.abs(c-s.x))),!d)return void(l=!1);if(o=m[0].scrollTop,"undefined"==typeof p&&0!==o&&(p=!0),!h){if(m.removeClass("transitioning"),o>m[0].offsetHeight)return void(l=!1);y&&(g=m.attr("data-ptr-distance"),g.indexOf("%")>=0&&(g=m[0].offsetHeight*parseInt(g,10)/100)),T=m.hasClass("refreshing")?g:0,x=m[0].scrollHeight!==m[0].offsetHeight&&t.device.ios?!1:!0,x=!0}return h=!0,u=i-s.y,u>0&&0>=o||0>o?(t.device.ios&&parseInt(t.device.osVersion.split(".")[0],10)>7&&0===o&&!p&&(x=!0),x&&(n.preventDefault(),v=Math.pow(u,.85)+T,m.transform("translate3d(0,"+v+"px,0)")),void(x&&Math.pow(u,.85)>g||!x&&u>=2*g?(w=!0,m.addClass("pull-up").removeClass("pull-down")):(w=!1,m.removeClass("pull-up").addClass("pull-down")))):(m.removeClass("pull-up pull-down"),void(w=!1))}}function e(){if(!l||!h)return l=!1,void(h=!1);if(v&&(m.addClass("transitioning"),v=0),m.transform(""),w){if(m.hasClass("refreshing"))return;m.addClass("refreshing"),m.trigger("refresh")}else m.removeClass("pull-down");l=!1,h=!1}function a(){r.off(t.touchEvents.start,c),r.off(t.touchEvents.move,i),r.off(t.touchEvents.end,e)}var r=t(n);if(r.hasClass("pull-to-refresh-content")||(r=r.find(".pull-to-refresh-content")),r&&0!==r.length){var l,h,d,u,f,m,v,o,p,g,y,s={},w=!1,x=!1,T=0;m=r,m.attr("data-ptr-distance")?y=!0:g=44,r.on(t.touchEvents.start,c),r.on(t.touchEvents.move,i),r.on(t.touchEvents.end,e),r[0].destroyPullToRefresh=a}},t.pullToRefreshDone=function(n){t(window).scrollTop(0),n=t(n),0===n.length&&(n=t(".pull-to-refresh-content.refreshing")),n.removeClass("refreshing").addClass("transitioning"),n.transitionEnd(function(){n.removeClass("transitioning pull-up pull-down")})},t.pullToRefreshTrigger=function(n){n=t(n),0===n.length&&(n=t(".pull-to-refresh-content")),n.hasClass("refreshing")||(n.addClass("transitioning refreshing"),n.trigger("refresh"))},t.destroyPullToRefresh=function(n){n=t(n);var c=n.hasClass("pull-to-refresh-content")?n:n.find(".pull-to-refresh-content");0!==c.length&&c[0].destroyPullToRefresh&&c[0].destroyPullToRefresh()}}(Zepto),+function(t){"use strict";function n(){var n,c=t(this),i=t.getScroller(c),e=i.scrollTop(),a=i.scrollHeight(),r=c[0].offsetHeight,l=c[0].getAttribute("data-distance"),h=c.find(".virtual-list"),d=c.hasClass("infinite-scroll-top");if(l||(l=50),"string"==typeof l&&l.indexOf("%")>=0&&(l=parseInt(l,10)/100*r),l>r&&(l=r),d)l>e&&c.trigger("infinite");else if(e+r>=a-l){if(h.length>0&&(n=h[0].f7VirtualList,n&&!n.reachEnd))return;c.trigger("infinite")}}t.attachInfiniteScroll=function(c){t.getScroller(c).on("scroll",n)},t.detachInfiniteScroll=function(c){t.getScroller(c).off("scroll",n)},t.initInfiniteScroll=function(n){function c(){t.detachInfiniteScroll(i),n.off("pageBeforeRemove",c)}n=t(n);var i=n.hasClass("infinite-scroll")?n:n.find(".infinite-scroll");0!==i.length&&(t.attachInfiniteScroll(i),n.forEach(function(n){if(t(n).hasClass("infinite-scroll-top")){var c=n.scrollHeight-n.clientHeight;t(n).scrollTop(c)}}),n.on("pageBeforeRemove",c))}}(Zepto),+function(t){"use strict";t(function(){t(document).on("focus",".searchbar input",function(n){var c=t(n.target);c.parents(".searchbar").addClass("searchbar-active")}),t(document).on("click",".searchbar-cancel",function(n){var c=t(n.target);c.parents(".searchbar").removeClass("searchbar-active")}),t(document).on("blur",".searchbar input",function(n){var c=t(n.target);c.parents(".searchbar").removeClass("searchbar-active")})})}(Zepto),+function(t){"use strict";t.allowPanelOpen=!0,t.openPanel=function(n){function c(){a.transitionEnd(function(i){i.target===a[0]?(n.trigger(n.hasClass("active")?"opened":"closed"),t.allowPanelOpen=!0):c()})}if(!t.allowPanelOpen)return!1;("left"===n||"right"===n)&&(n=".panel-"+n),n=n?t(n):t(".panel").eq(0);var i=n.hasClass("panel-right")?"right":"left";if(0===n.length||n.hasClass("active"))return!1;t.closePanel(),t.allowPanelOpen=!1;var e=n.hasClass("panel-reveal")?"reveal":"cover";n.css({display:"block"}).addClass("active"),n.trigger("open");var a=(n[0].clientLeft,"reveal"===e?t(t.getCurrentPage()):n);return c(),t(document.body).addClass("with-panel-"+i+"-"+e),!0},t.closePanel=function(){var n=t(".panel.active");if(0===n.length)return!1;var c=n.hasClass("panel-reveal")?"reveal":"cover",i=n.hasClass("panel-left")?"left":"right";n.removeClass("active");var e="reveal"===c?t(".page"):n;n.trigger("close"),t.allowPanelOpen=!1,e.transitionEnd(function(){n.hasClass("active")||(n.css({display:""}),n.trigger("closed"),t("body").removeClass("panel-closing"),t.allowPanelOpen=!0)}),t("body").addClass("panel-closing").removeClass("with-panel-"+i+"-"+c)},t(document).on("click",".open-panel",function(n){var c=t(n.target).data("panel");t.openPanel(c)}),t(document).on("click",".close-panel, .panel-overlay",function(){t.closePanel()}),t.initSwipePanels=function(){function n(n){if(!(!t.allowPanelOpen||!r&&!l||m||t(".modal-in, .photo-browser-in").length>0||!h&&!l&&t(".panel.active").length>0&&!e.hasClass("active"))){if(b.x="touchstart"===n.type?n.targetTouches[0].pageX:n.pageX,b.y="touchstart"===n.type?n.targetTouches[0].pageY:n.pageY,h||l){if(t(".panel.active").length>0)a=t(".panel.active").hasClass("panel-left")?"left":"right";else{if(l)return;a=r}if(!a)return}if(e=t(".panel.panel-"+a),e[0]){if(s=e.hasClass("active"),d&&!s){if("left"===a&&b.x>d)return;if("right"===a&&b.x<window.innerWidth-d)return}v=!1,m=!0,o=void 0,p=(new Date).getTime(),T=void 0}}}function c(n){if(m&&e[0]&&!n.f7PreventPanelSwipe){var c="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,i="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if("undefined"==typeof o&&(o=!!(o||Math.abs(i-b.y)>Math.abs(c-b.x))),o)return void(m=!1);if(!T&&(T=c>b.x?"to-right":"to-left","left"===a&&"to-left"===T&&!e.hasClass("active")||"right"===a&&"to-right"===T&&!e.hasClass("active")))return void(m=!1);if(f){var r=(new Date).getTime()-p;return 300>r&&("to-left"===T&&("right"===a&&t.openPanel(a),"left"===a&&e.hasClass("active")&&t.closePanel()),"to-right"===T&&("left"===a&&t.openPanel(a),"right"===a&&e.hasClass("active")&&t.closePanel())),m=!1,console.log(3),void(v=!1)
}v||(x=e.hasClass("panel-cover")?"cover":"reveal",s||(e.show(),C.show()),w=e[0].offsetWidth,e.transition(0)),v=!0,n.preventDefault();var l=s?0:-u;"right"===a&&(l=-l),g=c-b.x+l,"right"===a?(y=g-(s?w:0),y>0&&(y=0),-w>y&&(y=-w)):(y=g+(s?w:0),0>y&&(y=0),y>w&&(y=w)),"reveal"===x?(k.transform("translate3d("+y+"px,0,0)").transition(0),C.transform("translate3d("+y+"px,0,0)")):e.transform("translate3d("+y+"px,0,0)").transition(0)}}function i(){if(!m||!v)return m=!1,void(v=!1);m=!1,v=!1;var c,n=(new Date).getTime()-p,i=0===y||Math.abs(y)===w;if(c=s?y===-w?"reset":300>n&&Math.abs(y)>=0||n>=300&&Math.abs(y)<=w/2?"left"===a&&y===w?"reset":"swap":"reset":0===y?"reset":300>n&&Math.abs(y)>0||n>=300&&Math.abs(y)>=w/2?"swap":"reset","swap"===c&&(t.allowPanelOpen=!0,s?(t.closePanel(),i&&(e.css({display:""}),t("body").removeClass("panel-closing"))):t.openPanel(a),i&&(t.allowPanelOpen=!0)),"reset"===c)if(s)t.allowPanelOpen=!0,t.openPanel(a);else if(t.closePanel(),i)t.allowPanelOpen=!0,e.css({display:""});else{var r="reveal"===x?k:e;t("body").addClass("panel-closing"),r.transitionEnd(function(){t.allowPanelOpen=!0,e.css({display:""}),t("body").removeClass("panel-closing")})}"reveal"===x&&(k.transition(""),k.transform("")),e.transition("").transform(""),C.css({display:""}).transform("")}var e,a,r=t.smConfig.swipePanel,l=t.smConfig.swipePanelOnlyClose,h=!0,d=!1,u=2,f=!1;if(r||l){var m,v,o,p,g,y,s,w,x,T,C=t(".panel-overlay"),b={},k=t(".page");t(document).on(t.touchEvents.start,n),t(document).on(t.touchEvents.move,c),t(document).on(t.touchEvents.end,i)}},t.initSwipePanels()}(Zepto),+function(t){"use strict";function n(t){for(var n=["external","tab-link","open-popup","close-popup","open-panel","close-panel"],c=n.length-1;c>=0;c--)if(t.hasClass(n[c]))return!0;var i=t.get(0),e=i.getAttribute("href"),a=["http","https"];return/^(\w+):/.test(e)&&a.indexOf(RegExp.$1)<0?!0:i.hasAttribute("external")?!0:!1}function c(n){var c=t.smConfig.routerFilter;if(t.isFunction(c)){var i=c(n);if("boolean"==typeof i)return i}return!0}window.CustomEvent||(window.CustomEvent=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),c},window.CustomEvent.prototype=window.Event.prototype);var i={pageLoadStart:"pageLoadStart",pageLoadCancel:"pageLoadCancel",pageLoadError:"pageLoadError",pageLoadComplete:"pageLoadComplete",pageAnimationStart:"pageAnimationStart",pageAnimationEnd:"pageAnimationEnd",beforePageRemove:"beforePageRemove",pageRemoved:"pageRemoved",beforePageSwitch:"beforePageSwitch",pageInit:"pageInitInternal"},e={getUrlFragment:function(t){var n=t.indexOf("#");return-1===n?"":t.slice(n+1)},getAbsoluteUrl:function(t){var n=document.createElement("a");n.setAttribute("href",t);var c=n.href;return n=null,c},getBaseUrl:function(t){var n=t.indexOf("#");return-1===n?t.slice(0):t.slice(0,n)},toUrlObject:function(t){var n=this.getAbsoluteUrl(t),c=this.getBaseUrl(n),i=this.getUrlFragment(t);return{base:c,full:n,original:t,fragment:i}},supportStorage:function(){var t="sm.router.storage.ability";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(n){return!1}}},a={sectionGroupClass:"page-group",curPageClass:"page-current",visiblePageClass:"page-visible",pageClass:"page"},r={leftToRight:"from-left-to-right",rightToLeft:"from-right-to-left"},l=window.history,h=function(){this.sessionNames={currentState:"sm.router.currentState",maxStateId:"sm.router.maxStateId"},this._init(),this.xhr=null,window.addEventListener("popstate",this._onPopState.bind(this))};h.prototype._init=function(){this.$view=t("body"),this.cache={};var n=t(document),c=location.href;this._saveDocumentIntoCache(n,c);var i,r,h=e.toUrlObject(c),d=n.find("."+a.pageClass),u=n.find("."+a.curPageClass),f=u.eq(0);if(h.fragment&&(r=n.find("#"+h.fragment)),r&&r.length?u=r.eq(0):u.length||(u=d.eq(0)),u.attr("id")||u.attr("id",this._generateRandomId()),f.length&&f.attr("id")!==u.attr("id")?(f.removeClass(a.curPageClass),u.addClass(a.curPageClass)):u.addClass(a.curPageClass),i=u.attr("id"),null===l.state){var m={id:this._getNextStateId(),url:e.toUrlObject(c),pageId:i};l.replaceState(m,"",c),this._saveAsCurrentState(m),this._incMaxStateId()}},h.prototype.load=function(n,c){void 0===c&&(c=!1),this._isTheSameDocument(location.href,n)?this._switchToSection(e.getUrlFragment(n)):(this._saveDocumentIntoCache(t(document),location.href),this._switchToDocument(n,c))},h.prototype.forward=function(){l.forward()},h.prototype.back=function(){l.back()},h.prototype.loadPage=h.prototype.load,h.prototype._switchToSection=function(n){if(n){var c=this._getCurrentSection(),i=t("#"+n);c!==i&&(this._animateSection(c,i,r.rightToLeft),this._pushNewState("#"+n,n))}},h.prototype._switchToDocument=function(t,n,c,i){var a=e.toUrlObject(t).base;n&&delete this.cache[a];var r=this.cache[a],l=this;r?this._doSwitchDocument(t,c,i):this._loadDocument(t,{success:function(n){try{l._parseDocument(t,n),l._doSwitchDocument(t,c,i)}catch(e){location.href=t}},error:function(){location.href=t}})},h.prototype._doSwitchDocument=function(n,c,r){"undefined"==typeof c&&(c=!0);var l,h=e.toUrlObject(n),d=this.$view.find("."+a.sectionGroupClass),u=t(t("<div></div>").append(this.cache[h.base].$content).html()),f=u.find("."+a.pageClass),m=u.find("."+a.curPageClass);h.fragment&&(l=u.find("#"+h.fragment)),l&&l.length?m=l.eq(0):m.length||(m=f.eq(0)),m.attr("id")||m.attr("id",this._generateRandomId());var v=this._getCurrentSection();v.trigger(i.beforePageSwitch,[v.attr("id"),v]),f.removeClass(a.curPageClass),m.addClass(a.curPageClass),this.$view.prepend(u),this._animateDocument(d,u,m,r),c&&this._pushNewState(n,m.attr("id"))},h.prototype._isTheSameDocument=function(t,n){return e.toUrlObject(t).base===e.toUrlObject(n).base},h.prototype._loadDocument=function(n,c){this.xhr&&this.xhr.readyState<4&&(this.xhr.onreadystatechange=function(){},this.xhr.abort(),this.dispatch(i.pageLoadCancel)),this.dispatch(i.pageLoadStart),c=c||{};var e=this;this.xhr=t.ajax({url:n,success:t.proxy(function(n,i,e){var a=t("<html></html>");a.append(n),c.success&&c.success.call(null,a,i,e)},this),error:function(t,n,a){c.error&&c.error.call(null,t,n,a),e.dispatch(i.pageLoadError)},complete:function(t,n){c.complete&&c.complete.call(null,t,n),e.dispatch(i.pageLoadComplete)}})},h.prototype._parseDocument=function(t,n){var c=n.find("."+a.sectionGroupClass);if(!c.length)throw new Error("missing router view mark: "+a.sectionGroupClass);this._saveDocumentIntoCache(n,t)},h.prototype._saveDocumentIntoCache=function(n,c){var i=e.toUrlObject(c).base,r=t(n);this.cache[i]={$doc:r,$content:r.find("."+a.sectionGroupClass)}},h.prototype._getLastState=function(){var t=sessionStorage.getItem(this.sessionNames.currentState);try{t=JSON.parse(t)}catch(n){t=null}return t},h.prototype._saveAsCurrentState=function(t){sessionStorage.setItem(this.sessionNames.currentState,JSON.stringify(t))},h.prototype._getNextStateId=function(){var t=sessionStorage.getItem(this.sessionNames.maxStateId);return t?parseInt(t,10)+1:1},h.prototype._incMaxStateId=function(){sessionStorage.setItem(this.sessionNames.maxStateId,this._getNextStateId())},h.prototype._animateDocument=function(n,c,e,r){var l=e.attr("id"),h=n.find("."+a.curPageClass);h.addClass(a.visiblePageClass).removeClass(a.curPageClass),e.trigger(i.pageAnimationStart,[l,e]),this._animateElement(n,c,r),n.animationEnd(function(){h.removeClass(a.visiblePageClass),t(window).trigger(i.beforePageRemove,[n]),n.remove(),t(window).trigger(i.pageRemoved)}),c.animationEnd(function(){e.trigger(i.pageAnimationEnd,[l,e]),e.trigger(i.pageInit,[l,e])})},h.prototype._animateSection=function(t,n,c){var e=n.attr("id");t.trigger(i.beforePageSwitch,[t.attr("id"),t]),t.removeClass(a.curPageClass),n.addClass(a.curPageClass),n.trigger(i.pageAnimationStart,[e,n]),this._animateElement(t,n,c),n.animationEnd(function(){n.trigger(i.pageAnimationEnd,[e,n]),n.trigger(i.pageInit,[e,n])})},h.prototype._animateElement=function(t,n,c){"undefined"==typeof c&&(c=r.rightToLeft);var i,e,a=["page-from-center-to-left","page-from-center-to-right","page-from-right-to-center","page-from-left-to-center"].join(" ");switch(c){case r.rightToLeft:i="page-from-center-to-left",e="page-from-right-to-center";break;case r.leftToRight:i="page-from-center-to-right",e="page-from-left-to-center";break;default:i="page-from-center-to-left",e="page-from-right-to-center"}t.removeClass(a).addClass(i),n.removeClass(a).addClass(e),t.animationEnd(function(){t.removeClass(a)}),n.animationEnd(function(){n.removeClass(a)})},h.prototype._getCurrentSection=function(){return this.$view.find("."+a.curPageClass).eq(0)},h.prototype._back=function(n,c){if(this._isTheSameDocument(n.url.full,c.url.full)){var i=t("#"+n.pageId);if(i.length){var e=this._getCurrentSection();this._animateSection(e,i,r.leftToRight),this._saveAsCurrentState(n)}else location.href=n.url.full}else this._saveDocumentIntoCache(t(document),c.url.full),this._switchToDocument(n.url.full,!1,!1,r.leftToRight),this._saveAsCurrentState(n)},h.prototype._forward=function(n,c){if(this._isTheSameDocument(n.url.full,c.url.full)){var i=t("#"+n.pageId);if(i.length){var e=this._getCurrentSection();this._animateSection(e,i,r.rightToLeft),this._saveAsCurrentState(n)}else location.href=n.url.full}else this._saveDocumentIntoCache(t(document),c.url.full),this._switchToDocument(n.url.full,!1,!1,r.rightToLeft),this._saveAsCurrentState(n)},h.prototype._onPopState=function(t){var n=t.state;if(n&&n.pageId){var c=this._getLastState();return c?void(n.id!==c.id&&(n.id<c.id?this._back(n,c):this._forward(n,c))):void(console.error&&console.error("Missing last state when backward or forward"))}},h.prototype._pushNewState=function(t,n){var c={id:this._getNextStateId(),pageId:n,url:e.toUrlObject(t)};l.pushState(c,"",t),this._saveAsCurrentState(c),this._incMaxStateId()},h.prototype._generateRandomId=function(){return"page-"+ +new Date},h.prototype.dispatch=function(t){var n=new CustomEvent(t,{bubbles:!0,cancelable:!0});window.dispatchEvent(n)},t(function(){if(t.smConfig.router&&e.supportStorage()){var i=t("."+a.pageClass);if(!i.length){var r="Disable router function because of no .page elements";return void(window.console&&window.console.warn&&console.warn(r))}var l=t.router=new h;t(document).on("click","a",function(i){var e=t(i.currentTarget),a=c(e);if(a&&!n(e))if(i.preventDefault(),e.hasClass("back"))l.back();else{var r=e.attr("href");if(!r||"#"===r)return;var h="true"===e.attr("data-no-cache");l.load(r,h)}})}})}(Zepto),+function(t){"use strict";t.lastPosition=function(n){function c(n,c){e.forEach(function(i){if(0!==t(i).length){var a=n,r=sessionStorage.getItem(a);c.find(i).scrollTop(parseInt(r))}})}function i(n,c){var i=n;e.forEach(function(n){0!==t(n).length&&sessionStorage.setItem(i,c.find(n).scrollTop())})}if(sessionStorage){var e=n.needMemoryClass||[];t(window).off("beforePageSwitch").on("beforePageSwitch",function(t,n,c){i(n,c)}),t(window).off("pageAnimationStart").on("pageAnimationStart",function(t,n,i){c(n,i)})}}}(Zepto),+function(t){"use strict";var n=function(){var n=t(".page-current");return n[0]||(n=t(".page").addClass("page-current")),n};t.initPage=function(){var i=n();i[0]||(i=t(document.body));var e=i.hasClass("content")?i:i.find(".content");e.scroller(),t.initPullToRefresh(e),t.initInfiniteScroll(e),t.initCalendar(e),t.initSwiper&&t.initSwiper(e)},t.smConfig.showPageLoadingIndicator&&(t(window).on("pageLoadStart",function(){t.showIndicator()}),t(window).on("pageAnimationStart",function(){t.hideIndicator()}),t(window).on("pageLoadCancel",function(){t.hideIndicator()}),t(window).on("pageLoadComplete",function(){t.hideIndicator()}),t(window).on("pageLoadError",function(){t.hideIndicator(),t.toast("加载失败")})),t(window).on("pageAnimationStart",function(){t.closeModal(),t.closePanel(),t("body").removeClass("panel-closing"),t.allowPanelOpen=!0}),t(window).on("pageInit",function(){t.hideIndicator(),t.lastPosition({needMemoryClass:[".content"]})}),window.addEventListener("pageshow",function(t){t.persisted&&location.reload()}),t.init=function(){var c=n(),i=c[0].id;t.initPage(),c.trigger("pageInit",[i,c])},t(function(){FastClick.attach(document.body),t.smConfig.autoInit&&t.init(),t(document).on("pageInitInternal",function(){t.init()})})}(Zepto),+function(t){"use strict";if(t.device.ios){var n=function(t){var n,c;t=t||document.querySelector(t),t&&t.addEventListener("touchstart",function(i){n=i.touches[0].pageY,c=t.scrollTop,0>=c&&(t.scrollTop=1),c+t.offsetHeight>=t.scrollHeight&&(t.scrollTop=t.scrollHeight-t.offsetHeight-1)},!1)},c=function(){var c=t(".page-current").length>0?".page-current ":"",i=t(c+".content");new n(i[0])};t(document).on(t.touchEvents.move,".page-current .bar",function(){event.preventDefault()}),t(document).on("pageLoadComplete",function(){c()}),t(document).on("pageAnimationEnd",function(){c()}),c()}}(Zepto);